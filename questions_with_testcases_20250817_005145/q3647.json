{
  "problem_code": "problems",
  "title": "Queen and Stable Relationships",
  "tags": [],
  "text": "Swayamvara, in ancient India, was a practice of choosing a husband, from a list of suitors by a girl of marriageable age.It is the Swayamvara of gossip queen of IIIT, Akshata. Now, Akshata is always interested in knowing the stability of the relationships among various students of IIIT. Nowadays she is very busy in her Swayamvara’s preparation and is not able to update herself about the latest gossips. As you know she is the gossip queen. She would love if someone could do her a favor and collect answers of her questions about relationships in IIIT. It might increase the collector’s chance of getting selected for marriage.Before starting preparations for the Swayamvara, Akshata used to maintain notes about the relationships in IIIT and knew all about them. So she thought she can help you by providing the notes.There are various ways in which two people can be acquaintances:IfAandBare in a relationship, thenAandBare acquaintances of each other.IfAandBare acquaintances of each other andBandCare acquaintances of each other, thenAandCare also acquaintances of each other.In Akshata's notes, a relationship betweenperson1andperson2is represented as \"person1 person2\". The Queen's questions are also special.There are two types of questions:First type of query is whether two people, sayAandB, still remain each others’ acquaintances even if two people, sayCandD, break-up and end their relationship.Second type of query is whether two people, sayAandB, still remain acquaintances even if a person, sayC, leaves the college (It’s obvious that before leaving college,Cends all his/her relationships).InputFirst line of the input contains two integers,NandMwhereNrepresents the number of people in IIIT andMrepresents the number of relationships in Akshata’s notes.The nextMlines contain2strings each, containing the names of2people who are in a relationship.Next line contains a single integerQ, which represents the number of questions asked by the Queen. Each of the nextQlines represents a query. For every query first integer represents the query type.If the query type is1then it is followed by four strings in the same line, representingA B C and D. you have to output \"STABLE\" ifA and Bremain acquaintances of each other even ifC and Dbreak up and \"NOT STABLE\" otherwise.If the query type is2then it is followed by three strings in the same line, representingA B and C. You have to output \"STABLE\" ifA and Bremain acquaintances even ifCleaves college otherwise output \"NOT STABLE\". (All quotes for clarity)OutputFor every query output \"STABLE\" or \"NOT STABLE\" without quotes.Constraints1 ≤ N ≤ 100001 ≤ M ≤ 500001 ≤ Q ≤ 10000Size of all strings will be less than 50 characters.ExampleInput 1:3 2\r\nPerson1 Person2\r\nPerson1 Person3\r\n2\r\n2 Person2 Person3 Person1\r\n1 Person1 Person2 Person1 Person3Output 1:NOT STABLE\r\nSTABLEExplanation of Example 1Person1 is in a relationship with Person2 and Person1 is also in a relation with Person3. So Person3 and Person2 are acquaintances.First Query:Person2 and Person3 are acquaintances of each other only because of Person1, if Person1 leaves the college, then Person2 and Person3 are no longer acquaintances of each other.Second Query:Person1 will remain being acquaintance of Person2 even if Person1 breaks-up with Person3.Input 2:17 18\r\nPerson1 Person2\r\nPerson1 Person4\r\nPerson2 Person4\r\nPerson4 Person6\r\nPerson2 Person6\r\nPerson2 Person3\r\nPerson3 Person5\r\nPerson1 Person7\r\nPerson7 Person8\r\nPerson7 Person9\r\nPerson7 Person10\r\nPerson9 Person12\r\nPerson8 Person12\r\nPerson8 Person11\r\nPerson12 Person13\r\nPerson14 Person15\r\nPerson15 Person16\r\nPerson16 Person17\r\n8\r\n2 Person1 Person14 Person7\r\n2 Person1 Person2 Person2\r\n1 Person1 Person14 Person2 Person4\r\n1 Person5 Person13 Person1 Person2\r\n1 Person6 Person2 Person1 Person4\r\n1 Person13 Person6 Person7 Person8\r\n2 Person13 Person6 Person7\r\n2 Person13 Person6 Person8\r\n2 Person13 Person8 Person7Output 2:NOT STABLE\r\nNOT STABLE\r\nNOT STABLE\r\nSTABLE\r\nSTABLE\r\nSTABLE\r\nNOT STABLE\r\nSTABLEProblem Setter: Mayank Natani",
  "sample_input": "Input 1:3 2\r\nPerson1 Person2\r\nPerson1 Person3\r\n2\r\n2 Person2 Person3 Person1\r\n1 Person1 Person2 Person1 Person3Output 1:NOT STABLE\r\nSTABLE",
  "sample_output": "Input 2:17 18\r\nPerson1 Person2\r\nPerson1 Person4\r\nPerson2 Person4\r\nPerson4 Person6\r\nPerson2 Person6\r\nPerson2 Person3\r\nPerson3 Person5\r\nPerson1 Person7\r\nPerson7 Person8\r\nPerson7 Person9\r\nPerson7 Person10\r\nPerson9 Person12\r\nPerson8 Person12\r\nPerson8 Person11\r\nPerson12 Person13\r\nPerson14 Person15\r\nPerson15 Person16\r\nPerson16 Person17\r\n8\r\n2 Person1 Person14 Person7\r\n2 Person1 Person2 Person2\r\n1 Person1 Person14 Person2 Person4\r\n1 Person5 Person13 Person1 Person2\r\n1 Person6 Person2 Person1 Person4\r\n1 Person13 Person6 Person7 Person8\r\n2 Person13 Person6 Person7\r\n2 Person13 Person6 Person8\r\n2 Person13 Person8 Person7Output 2:NOT STABLE\r\nNOT STABLE\r\nNOT STABLE\r\nSTABLE\r\nSTABLE\r\nSTABLE\r\nNOT STABLE\r\nSTABLE",
  "link": "https://www.spoj.com/problems/QSTABLE",
  "scraped_at": "2025-08-17 00:34:27",
  "test_cases": [
    {
      "input": "Input 1:3 2\r\nPerson1 Person2\r\nPerson1 Person3\r\n2\r\n2 Person2 Person3 Person1\r\n1 Person1 Person2 Person1 Person3Output 1:NOT STABLE\r\nSTABLE",
      "expected_output": "Input 2:17 18\r\nPerson1 Person2\r\nPerson1 Person4\r\nPerson2 Person4\r\nPerson4 Person6\r\nPerson2 Person6\r\nPerson2 Person3\r\nPerson3 Person5\r\nPerson1 Person7\r\nPerson7 Person8\r\nPerson7 Person9\r\nPerson7 Person10\r\nPerson9 Person12\r\nPerson8 Person12\r\nPerson8 Person11\r\nPerson12 Person13\r\nPerson14 Person15\r\nPerson15 Person16\r\nPerson16 Person17\r\n8\r\n2 Person1 Person14 Person7\r\n2 Person1 Person2 Person2\r\n1 Person1 Person14 Person2 Person4\r\n1 Person5 Person13 Person1 Person2\r\n1 Person6 Person2 Person1 Person4\r\n1 Person13 Person6 Person7 Person8\r\n2 Person13 Person6 Person7\r\n2 Person13 Person6 Person8\r\n2 Person13 Person8 Person7Output 2:NOT STABLE\r\nNOT STABLE\r\nNOT STABLE\r\nSTABLE\r\nSTABLE\r\nSTABLE\r\nNOT STABLE\r\nSTABLE",
      "type": "sample_1",
      "description": "Original sample 1 from problem statement"
    },
    {
      "input": "4 3 3\nvavu dvrf 4\n3 4\nbpyzzpf pwfzt\n6 9\nxcnt btxlh\n4\n2 7 6 2\n4 vssn ak qlanylh\n1 4 9 5 9 4\n5 e dnfg axxkpw hplrltofvmcsg z vh\njvekgwqhqxah",
      "expected_output": "0",
      "type": "small_case_2",
      "description": "Generated small test case"
    },
    {
      "input": "2 8 9\ntrxu u 7\n2 9\nikam zdgwqhl\n4 10\nfg tne\n3\n1 2 9 2\n5 mcw fdtt uigz\n4 7 1 5 2 8\n2 zepx djr iew bdariimfszyv o gcuazm\nur",
      "expected_output": "0",
      "type": "small_case_3",
      "description": "Generated small test case"
    },
    {
      "input": "4 6 7\njzwch dzya 7\n4 4\nsh dy\n1 5\nbfex dwimulg\n6\n1 5 2 3\n9 yrr bve yblrvtk\n4 9 7 1 2 3\n1 c cxkqpx h etswksrpyj th jn\nyxamnv",
      "expected_output": "0",
      "type": "small_case_4",
      "description": "Generated small test case"
    },
    {
      "input": "35 59 81\nnki ao 23\n95 36\nti ptnqz\n72 26\nsg gapag\n16\n24 88 19 5\n30 anr njwwprj zl\n47 52 53 30 51 54\n76 lxq bclroka lr smzcqhom tysl hptpge\nkmfqdxz",
      "expected_output": "0",
      "type": "medium_case_5",
      "description": "Generated medium test case"
    },
    {
      "input": "37 15 98\ntyf ckbub 20\n97 1\nm xj\n49 93\ngh rm\n34\n34 26 23 91\n69 w r dovoqlj\n67 19 52 87 93 72\n87 vuksv kz zye unfpkihifxkh qq q\nboql",
      "expected_output": "0",
      "type": "medium_case_6",
      "description": "Generated medium test case"
    },
    {
      "input": "3 83 90\narfs jk 41\n84 24\nfgxddxa hdzoeo\n73 7\nrizzgl hrxcrqm\n33\n55 12 77 86\n61 e t ppdpt\n24 61 56 96 39 58\n24 jnhbbsy f dthu jgx n xa\ngkkudmaawl",
      "expected_output": "0",
      "type": "medium_case_7",
      "description": "Generated medium test case"
    },
    {
      "input": "25 7 91\ndge kly 81\n70 48\noamccpi hrxz\n44 14\ntkikisb hpx\n88\n9 89 53 8\n64 ja vdlfyhn i\n20 31 17 61 8 70\n29 kgvyap ipy tv wtujfcbfjl dsmv m\nzzj",
      "expected_output": "0",
      "type": "medium_case_8",
      "description": "Generated medium test case"
    },
    {
      "input": "74 88 98\ni uwc 89\n81 88\nhzbcslx l\n51 13\nufiw m\n70\n23 4 59 11\n59 onrbnmo o xxcp\n25 81 17 75 73 17\n95 bbg yszqfgt ql ulenouuoqvk jrrw suw\nefmqtvfwp",
      "expected_output": "0",
      "type": "medium_case_9",
      "description": "Generated medium test case"
    },
    {
      "input": "30850 29594 25223\nza r 13806\n30850 9205\ntvhlp gspqpiz\n9633 24424\nch bdvl\n25620\n31049 47148 13939 30436\n32736 bi uzi krw\n21001 30721 49610 15685 42521 29378\n17405 cpxgi dmn cd i z fho\nozjtcze",
      "expected_output": "0",
      "type": "large_case_10",
      "description": "Generated large test case"
    },
    {
      "input": "25280 14413 35638\nzbkv rjaex 46323\n40214 15797\ndjnyaje kxns\n46112 11932\nolm awuid\n40984\n21906 11488 32379 7410\n23864 kxkz ashqtw v\n7840 45858 9779 27991 8051 14760\n18817 incczk ycy cjwxlxu zxf gie bkds\nqtffhh",
      "expected_output": "0",
      "type": "large_case_11",
      "description": "Generated large test case"
    },
    {
      "input": "49251 34531 10034\nmu lb 11121\n16988 39627\ng hqzpi\n44969 23112\nuynwhi tiolcrl\n36365\n33706 40286 25619 41797\n40056 fdrh jw gz\n40303 36770 27510 17115 37025 44410\n19895 oqcw onq gp iqtiezbhnym dbxq zyd\nvkxf",
      "expected_output": "0",
      "type": "large_case_12",
      "description": "Generated large test case"
    },
    {
      "input": "41033 38109 17286\nqfrq ldz 33072\n35868 24893\ny rqwzb\n38988 41541\nb kozhtt\n46546\n35493 17788 13738 39441\n43075 wp z tgoarr\n18261 10819 40394 30494 10390 28687\n24593 kqzyzw vyt lfl emdmi r wslh\njxilkm",
      "expected_output": "0",
      "type": "large_case_13",
      "description": "Generated large test case"
    },
    {
      "input": "37940 12555 43379\niwv mbjwf 22650\n13395 28177\nfy zun\n31289 7685\nlbfatmf pdj\n47077\n10576 33927 14145 6621\n12176 pp zts lwis\n39331 11479 36810 32134 47132 5455\n26290 gwxq rgmgtjm iuazddy hrnika swva luglgq\nsp",
      "expected_output": "0",
      "type": "large_case_14",
      "description": "Generated large test case"
    },
    {
      "input": "13910 5040 45284\nelfmf htkzx 34862\n41384 47759\nfvhpwl t\n23075 15505\nrojaivw hdk\n10228\n14149 36180 25484 27193\n44929 bjtthyk q kthy\n30794 26828 28648 33679 26732 35788\n15693 qacdge qu yravor cwiuothi ib wm\ndnsw",
      "expected_output": "0",
      "type": "large_case_15",
      "description": "Generated large test case"
    },
    {
      "input": "41984 40138 16386\nzmv g 10941\n22866 31521\noioiud lbnaifw\n46228 39538\nglc z\n10010\n32870 25776 23475 37031\n31269 oje terftu imq\n47518 41765 44954 21793 36435 37406\n20268 dqiaf utce nc kaqnamerctnok pf ukddo\nxuri",
      "expected_output": "0",
      "type": "large_case_16",
      "description": "Generated large test case"
    },
    {
      "input": "100001 100001 100001\npabwc fc 100001\n100001 100001\nc mopzq\n100001 100001\nde wqho\n100001\n100001 100001 100001 100001\n100001 vjeiqky pwyh ybjngar\n100001 100001 100001 100001 100001 100001\n100001 unftmtx misq bcvptg yvuowzzshnj fz ccpj\nkwgxjlcaryk",
      "expected_output": "0",
      "type": "max_case_17",
      "description": "Generated max test case"
    },
    {
      "input": "100001 100001 100001\nd rp 100001\n100001 100001\nh waawvy\n100001 100001\nbv nm\n100001\n100001 100001 100001 100001\n100001 wqhjdru e xrpjvkl\n100001 100001 100001 100001 100001 100001\n100001 yjr avpeg z vofztigc lu bmh\nrdwz",
      "expected_output": "0",
      "type": "max_case_18",
      "description": "Generated max test case"
    },
    {
      "input": "100001 2 100000\nvdygk lf 2\n1 2\nvwa wrngauy\n1 1\nupv rj\n100000\n2 100001 2 100001\n100001 zs nfqlvx icn\n100001 1 1 1 100000 100001\n100000 b tn bzqqzp teddiupum r coq\nte",
      "expected_output": "0",
      "type": "edge_case_19",
      "description": "Generated edge test case"
    },
    {
      "input": "100000 2 100000\nxrcqd zhln 1\n100000 1\nwuh suu\n2 1\ncx ujwgp\n100001\n1 2 100001 1\n1 cyzisk kuu qgd\n1 100001 2 1 100001 100001\n100001 tipa exhm rus ito rdfv bqnhk\nn",
      "expected_output": "0",
      "type": "edge_case_20",
      "description": "Generated edge test case"
    }
  ],
  "test_cases_generated_at": "2025-08-17 00:51:57",
  "total_test_cases": 20,
  "outputs_generated_at": "2025-08-19 20:38:14"
}