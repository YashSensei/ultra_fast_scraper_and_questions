{
  "problem_code": "problems",
  "title": "Index Generation",
  "tags": [],
  "text": "Most nonfiction and reference books have anindexto help\r\nreaders find references to specific terms or concepts in the text.  Here\r\nis a sample index.larch, 4, 237, 238, 414\r\n+ Monty Python and, 64, 65, 66\r\n+ planting of, 17\r\nLenny Kravitz, 50\r\n+ going his way, 53\r\nlumbago, 107\r\nmango\r\n+ Chris Kattan, 380\r\n+ storage of, 87, 90\r\n+ use in Nethack, 500, 501\r\n+ Vitamin C content, 192Each index entry contains aprimary entryfollowed by zero or\r\nmoresecondary entries, which begin with a '+'.  Entries will\r\nnormally be followed by a list of page references, but a primary entry\r\nmight not be if at least one secondary entry is present (as is the case\r\nwithmango, above).  Primary entries are sorted, and secondary\r\nentries following a primary entry are also sorted. Sorting is\r\ncase-insensitive.  Page references for an entry are in ascending order\r\nand do not include duplicates. (A duplicate could occur if there are two\r\nor more identical entries on the same page.)Your task is to read a document that has index information embedded\r\nwithin it and produce the index.  Documents consist of one or more\r\nlines of ASCII text. The page number starts at 1, and the character\r\n'&' indicates the start of a new page (which adds 1 to the current\r\npage number).  Index entries are indicated by amarker, which in\r\nits most elaborate form has the following syntax:{text%primary$secondary}Heretextis the text to be indexed,primaryis an\r\nalternative primary entry, andsecondaryis a secondary entry.\r\nBoth '%primary' and '$secondary' are optional,\r\nbut if\r\nboth are present they must appear in the order given.  Ifprimaryis present then it is used as the primary entry, and if not thentextis used as the primary entry.  Ifsecondaryis present then\r\nthe marker adds a page reference for that secondary entry; otherwise it\r\nadds a page reference for the primary entry.  A single marker cannot\r\nadd a page reference for both a primary and secondary entry. Here are\r\nexamples of each of the four possible types of marker, which correspond\r\nto four of the entries in the sample index above.... his {lumbago} was acting up, so ...\r\n... {Lenny%Lenny Kravitz} lit up the crowd with his version of ...\r\n... Monty Python often used the {larch$Monty Python and} in ...\r\n... when storing {mangos%mango$storage of}, be sure to ...The input consists of one or more documents, followed by a line\r\ncontaining only '**' that signals the end of the input.  Documents are\r\nimplictly numbered starting with 1. Each document consists of one or\r\nmore lines of text followed by a line containing only '*'.  Each line\r\nof text will be at most 79 characters long, not counting end-of-line\r\ncharacters.  For documenti, output the line 'DOCUMENTi' followed\r\nby the sorted index using the exact output format shown in the\r\nexamples.Be sure to readNotes to Teams,\r\nwhich has general formatting\r\nguidelines that pertain to all problem input files, including this one.\r\nAlso note:A document will contain at most 100 markers,\r\nwith at most 20 primary entries.A primary entry will have at most 5 secondary entries.An entry will have at most 10 unique page references (not including \r\n        duplicates).The character '&' will not appear anywhere within a marker, and\r\nwill appear at most 500 times within a document.The character '*' is used only to signal the end of a document or\r\nthe end of the input.The characters '{', '}', '%', and '$' will only be used to\r\ndefine markers, and will not appear in any text or entries.A marker may span one or more lines.  Every end-of-line within a\r\nmarker must be converted to a single space.A space within a marker (including a converted end-of-line) is\r\nnormally included in the text/entry, just like any other character.\r\nHowever, any space that immediately follows '{', \r\nimmediately precedes '}', or is immediately adjacent to '%' or '$' \r\nmust be ignored.The total length of a marker, measured from the opening '{' to \r\nthe closing '}', and in which all embedded end-of-lines are converted\r\nto spaces, will be at most 79 characters.Input:Call me Ishmael.\r\n*\r\nOne {fish $unary}, two {fish$ binary},&red {fish $ scarlet}, blue {fish$\r\nazure}. & By { Dr. Seuss }.\r\n*\r\nThis is a {simple } & & { document} that &{\r\nsimply %simple\r\n$adverb\r\n} & {illustrates %vision} &&&&& one {simple-minded% simple} {Judge}'s {vision} \r\nfor what a {document } might { look % vision} like.\r\n*\r\n**Output:DOCUMENT 1\r\nDOCUMENT 2\r\nDr. Seuss, 3\r\nfish\r\n+ azure, 2\r\n+ binary, 1\r\n+ scarlet, 2\r\n+ unary, 1\r\nDOCUMENT 3\r\ndocument, 3, 10\r\nJudge, 10\r\nsimple, 1, 10\r\n+ adverb, 4\r\nvision, 5, 10",
  "sample_input": "larch, 4, 237, 238, 414\r\n+ Monty Python and, 64, 65, 66\r\n+ planting of, 17\r\nLenny Kravitz, 50\r\n+ going his way, 53\r\nlumbago, 107\r\nmango\r\n+ Chris Kattan, 380\r\n+ storage of, 87, 90\r\n+ use in Nethack, 500, 501\r\n+ Vitamin C content, 192",
  "sample_output": "... his {lumbago} was acting up, so ...\r\n... {Lenny%Lenny Kravitz} lit up the crowd with his version of ...\r\n... Monty Python often used the {larch$Monty Python and} in ...\r\n... when storing {mangos%mango$storage of}, be sure to ...",
  "link": "https://www.spoj.com/problems/INDEXGEN",
  "scraped_at": "2025-08-17 00:33:14",
  "test_cases": [
    {
      "input": "larch, 4, 237, 238, 414\r\n+ Monty Python and, 64, 65, 66\r\n+ planting of, 17\r\nLenny Kravitz, 50\r\n+ going his way, 53\r\nlumbago, 107\r\nmango\r\n+ Chris Kattan, 380\r\n+ storage of, 87, 90\r\n+ use in Nethack, 500, 501\r\n+ Vitamin C content, 192",
      "expected_output": "... his {lumbago} was acting up, so ...\r\n... {Lenny%Lenny Kravitz} lit up the crowd with his version of ...\r\n... Monty Python often used the {larch$Monty Python and} in ...\r\n... when storing {mangos%mango$storage of}, be sure to ...",
      "type": "sample_1",
      "description": "Original sample 1 from problem statement"
    },
    {
      "input": "5 6 8 1\nnqwxm w osru ipp 4\n7 4 10\ndqegw afw qtgnlo rpw wwk yk 9\n2\nxyvg mqb l 1\n7\ngxt h 9\n3\nt gdr ktrve lbncg 6\n9\nclex 3\ntnjmc\n1\no kgtn xcezjy 6\n9 7\nolrff rvif pd wclv 3\n8 9\njka tn x hsjkvlou tvndc 6\n1\nlfba wladh oeul mtucolcw 9",
      "expected_output": "0\n0\n0\n0\n2\n0\n7\n0\n3\n0\n9\n0\n0\n1\n0\n0\n0\n0\n0\n1\n0",
      "type": "small_case_2",
      "description": "Generated small test case"
    },
    {
      "input": "6 7 7 1\nqhsvhl xdkb r kf 2\n6 7 10\neskb bhk sn w egm jnek 3\n3\nsxfp nvniz ioj 9\n1\nqtbo qvyovrgr 8\n3\netaas kwgg g sbynk 6\n10\ngdimmbnp 10\ntqnmhhuxdo\n3\nyfcar sdop v 2\n2 2\ndoogy sls bbfin b 7\n6 8\nrpe etrwo xedbo imtjnva lerxi 7\n3\naeunl xywxzv l raagkkxi 8",
      "expected_output": "0\n0\n0\n0\n3\n0\n1\n0\n3\n0\n10\n0\n0\n3\n0\n0\n0\n0\n0\n3\n0",
      "type": "small_case_3",
      "description": "Generated small test case"
    },
    {
      "input": "6 10 10 6\nnxrx oa bbkx ubf 9\n5 2 7\nyrrx ybf kgmwi jiv wplc wqwiv 4\n3\nznnbe woxlgfpu jcwvf 8\n6\nren mbvpbwha 10\n3\nt obqlc xzjc j 6\n2\nokjfe 6\nctqdebjl\n4\npe t l 9\n6 1\nog otlcbwh e ekmw 1\n7 1\nru c ze ajoci oixcd 9\n2\nn tq e nxucckl 2",
      "expected_output": "0\n0\n0\n0\n3\n0\n6\n0\n3\n0\n2\n0\n0\n4\n0\n0\n0\n0\n0\n2\n0",
      "type": "small_case_4",
      "description": "Generated small test case"
    },
    {
      "input": "89 51 18 81\navyhqj dpf v axjpr 96\n65 22 91\nfah ro q uj xxoo mnmoc 12\n99\nkmaxp zjuzz kc 83\n83\nhiuq suxkac 78\n100\nnsyq u shl xuqqn 74\n14\nschzliu 77\nhowcdv\n23\njikrg doupg rdmyceb 86\n94 79\nrr b s xhpd 97\n53 63\ngenor we vdd fufrtxgs hasq 14\n36\npwa pl afc plqtkoq 15",
      "expected_output": "0\n0\n0\n0\n99\n0\n83\n0\n100\n0\n14\n0\n0\n23\n0\n0\n0\n0\n0\n36\n0",
      "type": "medium_case_5",
      "description": "Generated medium test case"
    },
    {
      "input": "27 74 28 32\nsiue orp jnjmx qr 27\n62 46 49\nlvsm j vayszt alvl czpoy qacmm 12\n4\nxeuip bwm xne 87\n71\nlpz delohkyj 42\n8\nv kgt hvqo qq 31\n74\nyc 56\ntz\n29\nwbwoh gzm zcblfd 100\n57 99\ne burhaj gvev uhwej 10\n82 39\nt hc l lqvka xdacq 94\n65\nhgqv xje cpmf y 87",
      "expected_output": "0\n0\n0\n0\n4\n0\n71\n0\n8\n0\n74\n0\n0\n29\n0\n0\n0\n0\n0\n65\n0",
      "type": "medium_case_6",
      "description": "Generated medium test case"
    },
    {
      "input": "86 50 61 56\nineh qjxd ehte brcz 84\n41 28 55\ngi bvg qtcgu cx ia lyfx 24\n60\nmlu ztukncsj b 13\n88\nquzw blz 59\n72\nemo tnzia p ieoz 93\n24\nhcls 94\ncftsfddcn\n66\ngtvh bwlgh tj 27\n83 41\nlp jnw jub megyh 18\n73 97\nant a yam loaqtaic zbk 5\n51\nqcjmr nysjbpm vi fet 5",
      "expected_output": "0\n0\n0\n0\n60\n0\n88\n0\n72\n0\n24\n0\n0\n66\n0\n0\n0\n0\n0\n51\n0",
      "type": "medium_case_7",
      "description": "Generated medium test case"
    },
    {
      "input": "27 19 70 93\nwhu o k mu 4\n59 45 34\nauggc k h uojbw dxtjn yis 41\n30\nnbdu finkwpf jcxai 16\n36\nvyr hqgducbt 23\n67\nl dxtat ecjze dogyq 7\n5\nd 23\nnowthbjl\n85\nqkhk ugmx pxinc 26\n85 81\ndxw rnlha fh qgbv 21\n42 89\ntbu pqt hbqr dvuot k 50\n59\nmli awerjsd fk xlom 16",
      "expected_output": "0\n0\n0\n0\n30\n0\n36\n0\n67\n0\n5\n0\n0\n85\n0\n0\n0\n0\n0\n59\n0",
      "type": "medium_case_8",
      "description": "Generated medium test case"
    },
    {
      "input": "82 77 78 12\ndnreok pzf k xwfr 26\n2 56 21\nu ew mrh jvns k ghj 64\n88\neu l kn 28\n44\ncvp sdm 58\n33\nxcx n cvbtb lamj 27\n83\nnwhad 5\ndjrlqbg\n72\nzl ugo hayjxtw 78\n45 88\ndvc dwrypo wsb eqdi 3\n59 93\nkrqrg klc zx paurla pqf 61\n77\nbhesr vqrg i h 32",
      "expected_output": "0\n0\n0\n0\n88\n0\n44\n0\n33\n0\n83\n0\n0\n72\n0\n0\n0\n0\n0\n77\n0",
      "type": "medium_case_9",
      "description": "Generated medium test case"
    },
    {
      "input": "352 222 306 160\nyo yprf wp l 272\n278 420 190\nc muqc ywiz hhiv whn e 335\n258\ngz cmwwemsu tvnhx 286\n412\nphxt fl 486\n276\nlo tvs yvdq pfl 244\n431\ngwae 297\nsnjwntf\n285\nw jvl mk 114\n371 211\nx j k e 118\n244 87\na im ag qsp bpqz 437\n370\noa vfpkszq k yaza 123",
      "expected_output": "0\n0\n0\n0\n258\n0\n412\n0\n276\n0\n431\n0\n0\n285\n0\n0\n0\n0\n0\n370\n0",
      "type": "large_case_10",
      "description": "Generated large test case"
    },
    {
      "input": "224 143 395 148\nbgfrk knqir dbdq avy 430\n308 241 379\nt lm fdmew l ebdck tujsr 335\n129\nf sa yx 129\n129\nikf nanab 412\n78\nlp gb ajcn s 126\n230\nitsdepfr 442\nljqf\n435\nhhjhg kjiz cpp 369\n339 67\nm xfkhce qqtt tmbw 469\n304 449\ni tgu vgig cgsb j 262\n131\nk tiphaze qxho lqrib 116",
      "expected_output": "0\n0\n0\n0\n129\n0\n129\n0\n78\n0\n230\n0\n0\n435\n0\n0\n0\n0\n0\n131\n0",
      "type": "large_case_11",
      "description": "Generated large test case"
    },
    {
      "input": "79 311 287 493\nmeiuej qt itudv ffw 237\n498 88 198\ni rg tquhd wlkl robpw ox 199\n317\njtaq a dfz 407\n425\npnc uibmc 321\n246\nidq s pjdai yhiq 184\n59\nkswwvoi 419\nwio\n483\nt ik mhtqt 410\n161 256\nrfhkt zhvgy nhv ipy 428\n308 361\nvywxh fzy rywb axvay g 253\n479\nqbz df etps rimck 259",
      "expected_output": "0\n0\n0\n0\n317\n0\n425\n0\n246\n0\n59\n0\n0\n483\n0\n0\n0\n0\n0\n479\n0",
      "type": "large_case_12",
      "description": "Generated large test case"
    },
    {
      "input": "213 193 368 280\na exyz fdxl jjkbs 110\n478 171 96\nh eow hjpziy l dm u 51\n346\nizkw tg ymehs 58\n143\nixw lzd 155\n320\ntawe uluq estl wrmkb 192\n296\nwd 368\ngio\n490\nzrb cz rtp 102\n326 275\nxo uwqzciw ylrn vlhp 481\n264 382\nlbyq r lmi gfajb fugub 370\n82\nt cztxbb m gmh 232",
      "expected_output": "0\n0\n0\n0\n346\n0\n143\n0\n320\n0\n296\n0\n0\n490\n0\n0\n0\n0\n0\n82\n0",
      "type": "large_case_13",
      "description": "Generated large test case"
    },
    {
      "input": "61 386 462 52\nte lw s eov 172\n87 430 486\nnvsqx wvowo ihinw mu uijq moixm 405\n271\nvizzb vzlmcdi fvum 181\n144\nhdlot ewgj 182\n386\nhcun ld kr ihe 261\n212\nbbqsb 491\nrznhf\n340\nqm qi wh 285\n448 458\ngwqbq rpgduq zszo oawmf 368\n203 62\nd krsa uoc oyqlnl pps 99\n170\nd umw d vln 102",
      "expected_output": "0\n0\n0\n0\n271\n0\n144\n0\n386\n0\n212\n0\n0\n340\n0\n0\n0\n0\n0\n170\n0",
      "type": "large_case_14",
      "description": "Generated large test case"
    },
    {
      "input": "437 226 166 323\nzaddwh iwpax m ipwu 121\n415 325 400\nyqg sesyt qz ha qrv klw 76\n372\niu wgn dkkhc 315\n218\nt o 392\n381\nv neb xblp om 274\n455\nagepjpo 83\niwt\n459\na hon lhm 435\n287 382\nlax vaem tc eusw 440\n363 395\nsc skrb xcut mmxzx kfzfu 427\n477\nmrsgp xelujiv prd z 156",
      "expected_output": "0\n0\n0\n0\n372\n0\n218\n0\n381\n0\n455\n0\n0\n459\n0\n0\n0\n0\n0\n477\n0",
      "type": "large_case_15",
      "description": "Generated large test case"
    },
    {
      "input": "148 313 327 361\nbwtmz dl ptxbc l 398\n460 183 223\neulaa qd v lmbmq uxbu vf 498\n137\nkrvdk zmpzen ov 222\n252\nwxb orjmha 79\n479\nttc jpf roi ijrx 77\n479\nz 430\nvpwij\n298\ncrs oqqjl ha 273\n255 376\nlgpe mvupyd nfkpo is 481\n172 495\nowxql ae maec mrahp ljcvv 175\n463\nalv iibvub gj srtlhbvu 425",
      "expected_output": "0\n0\n0\n0\n137\n0\n252\n0\n479\n0\n479\n0\n0\n298\n0\n0\n0\n0\n0\n463\n0",
      "type": "large_case_16",
      "description": "Generated large test case"
    },
    {
      "input": "1000 1000 1000 1000\nwp r tcsz a 1000\n1000 1000 1000\ntd tl pjospj ayxyl qvpgo zo 1000\n1000\npw zdnyjke jwlh 1000\n1000\ne mygaxyhr 1000\n1000\ndqdt z wvp migts 1000\n1000\nsz 1000\nnmrypo\n1000\nn bsiw oudhi 1000\n1000 1000\ndtr xinxy oy ajqkh 1000\n1000 1000\nippss zinv szrb esj iojp 1000\n1000\nwub eroz xtdi uephnedx 1000",
      "expected_output": "0\n0\n0\n0\n1000\n0\n1000\n0\n1000\n0\n1000\n0\n0\n1000\n0\n0\n0\n0\n0\n1000\n0",
      "type": "max_case_17",
      "description": "Generated max test case"
    },
    {
      "input": "1000 1000 1000 1000\njomy i t egq 1000\n1000 1000 1000\nzbrpp yd rhcsv zww vmgap mw 1000\n1000\ndl ennzrind p 1000\n1000\nealw cepmxf 1000\n1000\nzshjt vwcss f iu 1000\n1000\ntta 1000\nosnqfkymd\n1000\nib modv ftpye 1000\n1000 1000\noqm gdrlawp dn q 1000\n1000 1000\nmnl c f alwaqxz tio 1000\n1000\nvlc yowzxh jnd pcqqoqsh 1000",
      "expected_output": "0\n0\n0\n0\n1000\n0\n1000\n0\n1000\n0\n1000\n0\n0\n1000\n0\n0\n0\n0\n0\n1000\n0",
      "type": "max_case_18",
      "description": "Generated max test case"
    },
    {
      "input": "1000 999 2 1000\nhrc wn yz qeric 1\n999 1000 1\nxmw nvg md dm b tj 1\n1\nemyx msiidn gdsli 1\n999\nmtzg gwoqpfzi 1\n2\ntys vduma xt ub 999\n1\nzybuetv 999\ntvyyfzir\n1\nwj jisou gkkqe 1000\n2 1\namvx riztlhu da ghth 1\n1 1000\npbc jyxm rle bszf utm 1000\n999\nnh rkbtx ibzw g 1",
      "expected_output": "0\n0\n0\n0\n1\n0\n999\n0\n2\n0\n1\n0\n0\n1\n0\n0\n0\n0\n0\n999\n0",
      "type": "edge_case_19",
      "description": "Generated edge test case"
    },
    {
      "input": "1 999 2 999\nwavc d n idemr 1000\n1000 1000 2\nih zqa mles wowny vkbgx eyb 2\n2\nflpuu qhyjqp gizzz 2\n2\np dmwtk 1\n999\nua vrerj ulr rlo 2\n999\nss 999\namzhmriz\n1000\nzcd ep fwbbli 1\n1000 999\nrdzm wchnnqz ju um 1000\n2 999\nvlis ouwmg c nngb n 2\n1000\nqrlep zlfmsh lg shapju 1000",
      "expected_output": "0\n0\n0\n0\n2\n0\n2\n0\n999\n0\n999\n0\n0\n1000\n0\n0\n0\n0\n0\n1000\n0",
      "type": "edge_case_20",
      "description": "Generated edge test case"
    }
  ],
  "test_cases_generated_at": "2025-08-17 00:51:45",
  "total_test_cases": 20,
  "outputs_generated_at": "2025-08-19 20:36:21"
}