{
  "problem_code": "problems",
  "title": "Stabards",
  "tags": [],
  "text": "In a galaxy far far away, there exists a silicon based form of life, who call themselves stabards. Unlike humans, the stabards are multi-gendered. Therefore, when two stabards form a partnership (known as mating in earth parlance), one stabard would be the donor of genetic material and the other would be the combinator of the genetic material. Of course, the combinator had the tougher task, to combine the genetic material and create a new stabard.Early on, the wise stabards realized that due to the increased number of genders, every stabard was likely to waste his time trying to find a suitable partner. After that, due to the tremendous opportunity, every stabard would waste some more time trying to cheat on his partner by forming more partnerships (especially the donors since they had nothing much to do). Therefore, the wise ones made the following rules about partnerships:Each stabard can form at most two partnerships.In order to maintain a sense of balance, a stabard cannot play the same role (donor/combinator) in both partnerships.The partnerships shall be formed such that the total number of them is maximized.To ensure all rules are being followed, the wise ones send the stabard data every year to earth and wish to know the maximum number of partnerships that can be formed.InputFor each test case, two integers M (the number of stabard genders) and N (the total number of stabards) are given on the first line. M lines follow, each consisting of M characters. The j-th character on the i-th line denotes what would happen if a stabard of gender i formed a partnership with a stabard of gender j. It will be either'X' – such a partnership is forbidden.'D' – stabard of gender i would be the donor.'C' – stabard of gender i would be the combinator.After the M lines, N space separated integers are given on a single line. The i-th integer gives the gender of the i-th stabard.The end of the test cases is given by a line with M and N both being 0. This test case should not be processed. The total number of test cases will be ≤ 100.Constraints0 < M ≤ 1000 < N ≤ 100The gender data for stabards will be symmetric and consistent. (i.e. character i on line j will not conflict with character j on line i). Two stabards of the same gender can never partner each other. (The wise ones fear this will pollute the gene pool. Moreover, big fights would break out as who would be the donor.) The gender given for each stabard will be between 0 and M-1 inclusive.OutputFor each test case, a single integer giving the total number of partnerships. Each integer must be on its own line.ExampleInput:2 4\r\nXD\r\nCX\r\n0 0 1 1\r\n3 3\r\nXDC\r\nCXD\r\nDCX\r\n0 1 2\r\n0 0Output:2\r\n3",
  "sample_input": "Input:2 4\r\nXD\r\nCX\r\n0 0 1 1\r\n3 3\r\nXDC\r\nCXD\r\nDCX\r\n0 1 2\r\n0 0Output:2\r\n3",
  "sample_output": "Not found",
  "link": "https://www.spoj.com/problems/STABARDS",
  "scraped_at": "2025-08-17 00:34:25",
  "test_cases": [
    {
      "input": "2 4\r\nXD\r\nCX\r\n0 0 1 1\r\n3 3\r\nXDC\r\nCXD\r\nDCX\r\n0 1 2\r\n0 0",
      "expected_output": "2\r\n3",
      "type": "sample_1",
      "description": "Original sample 1 from problem statement"
    },
    {
      "input": "3 5\nurwf\nkq\n1 6 1 8\n6 3\nsl\nhzekz\nr\n7 5 2\n3 5",
      "expected_output": "To be computed",
      "type": "small_case_2",
      "description": "Generated small test case"
    },
    {
      "input": "1 4\nekay\nn\n2 1 5 6\n5 4\nelviq\nvqgpvk\ndxyd\n5 7 5\n7 5",
      "expected_output": "To be computed",
      "type": "small_case_3",
      "description": "Generated small test case"
    },
    {
      "input": "2 10\nuoc\nfh\n4 4 5 2\n3 9\npcety\nbgesy\nggcnca\n7 3 6\n10 2",
      "expected_output": "To be computed",
      "type": "small_case_4",
      "description": "Generated small test case"
    },
    {
      "input": "89 70\nerc\nu\n3 8 4 29\n50 54\nwkvq\ncmo\nfwu\n59 83 12\n65 22",
      "expected_output": "To be computed",
      "type": "medium_case_5",
      "description": "Generated medium test case"
    },
    {
      "input": "77 37\nhk\nhgxs\n43 82 99 6\n93 46\nj\npcd\nvzmge\n12 54 44\n67 65",
      "expected_output": "To be computed",
      "type": "medium_case_6",
      "description": "Generated medium test case"
    },
    {
      "input": "49 21\nr\nfgss\n31 23 95 40\n13 84\ns\nv\nd\n17 84 10\n80 73",
      "expected_output": "To be computed",
      "type": "medium_case_7",
      "description": "Generated medium test case"
    },
    {
      "input": "35 62\ns\nk\n18 91 86 18\n22 54\nc\nbpon\nnrhcxy\n57 61 77\n78 66",
      "expected_output": "To be computed",
      "type": "medium_case_8",
      "description": "Generated medium test case"
    },
    {
      "input": "33 49\nxs\nk\n16 10 65 94\n82 54\njaix\nd\nidwdu\n57 69 5\n35 25",
      "expected_output": "To be computed",
      "type": "medium_case_9",
      "description": "Generated medium test case"
    },
    {
      "input": "27 40\nsha\ni\n13 20 19 16\n50 16\nmset\ncebu\now\n6 23 10\n35 49",
      "expected_output": "To be computed",
      "type": "large_case_10",
      "description": "Generated large test case"
    },
    {
      "input": "11 35\ngu\nv\n17 46 45 46\n16 8\nfxh\ndzfbgn\nxio\n27 10 21\n26 30",
      "expected_output": "To be computed",
      "type": "large_case_11",
      "description": "Generated large test case"
    },
    {
      "input": "42 42\nn\nu\n43 26 49 23\n28 12\njzbees\niiasbm\npyxh\n8 26 37\n42 23",
      "expected_output": "To be computed",
      "type": "large_case_12",
      "description": "Generated large test case"
    },
    {
      "input": "16 47\nlllp\nit\n26 31 41 24\n23 29\nqvv\nkpzmjx\ndkzhkc\n24 40 23\n20 24",
      "expected_output": "To be computed",
      "type": "large_case_13",
      "description": "Generated large test case"
    },
    {
      "input": "42 8\nx\nw\n14 33 5 30\n18 22\neysha\nfnb\njppbvi\n19 15 16\n12 49",
      "expected_output": "To be computed",
      "type": "large_case_14",
      "description": "Generated large test case"
    },
    {
      "input": "7 37\ny\nbzh\n23 10 12 39\n40 29\nwb\nekeapt\ncse\n48 42 23\n42 24",
      "expected_output": "To be computed",
      "type": "large_case_15",
      "description": "Generated large test case"
    },
    {
      "input": "16 28\nrnyb\nm\n13 50 34 14\n32 44\nmh\njuz\nt\n44 22 10\n38 15",
      "expected_output": "To be computed",
      "type": "large_case_16",
      "description": "Generated large test case"
    },
    {
      "input": "100 100\njp\nh\n100 100 100 100\n100 100\nhd\ni\noh\n100 100 100\n100 100",
      "expected_output": "To be computed",
      "type": "max_case_17",
      "description": "Generated max test case"
    },
    {
      "input": "100 100\nh\nbov\n100 100 100 100\n100 100\nfup\nj\nooul\n100 100 100\n100 100",
      "expected_output": "To be computed",
      "type": "max_case_18",
      "description": "Generated max test case"
    },
    {
      "input": "100 100\njgn\nm\n1 2 1 2\n2 1\njsg\nd\nnmz\n99 2 99\n2 100",
      "expected_output": "To be computed",
      "type": "edge_case_19",
      "description": "Generated edge test case"
    },
    {
      "input": "2 99\nbpxp\ncx\n2 99 2 99\n99 1\nrof\nfm\nwq\n1 100 99\n100 99",
      "expected_output": "To be computed",
      "type": "edge_case_20",
      "description": "Generated edge test case"
    }
  ],
  "test_cases_generated_at": "2025-08-17 00:51:56",
  "total_test_cases": 20
}