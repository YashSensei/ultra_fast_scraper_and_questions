{
  "problem_code": "problems",
  "title": "Bouncing Balls",
  "tags": [],
  "text": "Consider a grid having N×M squares. The top left square is (0, 0) and the bottom right is (N-1, M-1). Each square in the grid is either occupied by a platform or has a number written on it. Two balls are released from the top of the grid (from locations (0, Y1) and (0, Y2), 0 ≤ Y1, Y2 < M). Each ball falls down vertically, unless either it falls down the bottom row, or encounters a platform beneath. When the ball encounters a platform beneath, it rolls either to the left or to the right, each with an equal probability. The score obtained by a ball is the sum of the numbers on the squares that it passes (including the starting square). However, if both the balls pass over the same square, points corresponding to that square are obtained only once, and not twice. Your goal is to choose Y1 and Y2 such that the expected score obtained by the two balls is maximized. For example, consider the grid below: (P represents a platform)N = 6, M = 6\r\n112214\r\n211243\r\n30PPP2\r\n423378\r\n1P9753\r\n220102Here, dropping a ball from position (0, 3) could result in one of the following three scores:2 + 2 + 1 + 1 + 0 + 2 + 4 + 1 + 2 = 152 + 2 + 1 + 1 + 0 + 2 + 3 + 9 + 0 = 202 + 2 + 4 + 3 + 2 + 8 + 3 + 2 = 26The expected score is (considering only 1 ball):1/2*(1/2*(15) + 1/2*(20)) + 1/2*(26)InputThe first line contains the number of test cases.The first line for each test case consists of N and M.Lines 2..N+1 for each test case consist of M characters each. Each character is either a digit from 0 to 9, or the letter 'P'.OutputThe maximum expected score accurate to 4 decimal places.ExampleInput:4\r\n5 5\r\n53214\r\n53214\r\n53214\r\n54214\r\n53214\r\n5 5\r\n00000\r\n0P0P0\r\n00000\r\n01P20\r\n00000\r\n5 5\r\n09090\r\n0P0P0\r\n00000\r\n01P20\r\n00000\r\n6 6\r\n112214\r\n211243\r\n30PPP2\r\n423378\r\n1P9753\r\n220102Output:45.0000\r\n2.2500\r\n19.3125\r\n35.5000ConstraintsDataset 1: 1 ≤ number of test cases ≤ 1003 ≤ N, M ≤ 100All possible paths from the top will eventually lead to the ball falling to the bottom. There will be no \"rebounds\" possible. If there is a 'P' on square (x, y), there will not be a 'P' on squares (x-1, y-1) or (x-1, y+1) or (x+1, y-1) or (x+1, y+1). Also, platforms will not occur on the boundaries of the grid. Thus, the X coordinate of a platform will never be 0 or N-1, and the Y coordinate will never be 0 or M-1. The test case was generated to guarantee that any answer with absolute error in 1e-9 will got accepted.",
  "sample_input": "N = 6, M = 6\r\n112214\r\n211243\r\n30PPP2\r\n423378\r\n1P9753\r\n220102",
  "sample_output": "1/2*(1/2*(15) + 1/2*(20)) + 1/2*(26)",
  "link": "https://www.spoj.com/problems/BOBALLS",
  "scraped_at": "2025-08-17 00:33:32",
  "test_cases": [
    {
      "input": "N = 6, M = 6\r\n112214\r\n211243\r\n30PPP2\r\n423378\r\n1P9753\r\n220102",
      "expected_output": "1/2*(1/2*(15) + 1/2*(20)) + 1/2*(26)",
      "type": "sample_1",
      "description": "Original sample 1 from problem statement"
    },
    {
      "input": "4 2\nplmka dcedc i gbdf ahu 6\n1\n5\n2 1\nlinuy\n2\n1 1\nsjaxxj\n6",
      "expected_output": "To be computed",
      "type": "small_case_2",
      "description": "Generated small test case"
    },
    {
      "input": "5 5\nrbcz ul lbuo qf yk 6\n1\n5\n2 2\nvlusdsqfi\n5\n3 1\ntozwm\n3",
      "expected_output": "To be computed",
      "type": "small_case_3",
      "description": "Generated small test case"
    },
    {
      "input": "4 4\nlmlmb jan luxq nv lxonc 6\n6\n2\n6 4\nwen\n5\n4 2\nduquh\n6",
      "expected_output": "To be computed",
      "type": "small_case_4",
      "description": "Generated small test case"
    },
    {
      "input": "5 3\ntl wfqp x ao fijcn 3\n3\n6\n3 3\nrfpnopavgrj\n2\n6 4\nl\n3",
      "expected_output": "To be computed",
      "type": "medium_case_5",
      "description": "Generated medium test case"
    },
    {
      "input": "2 4\nvmf jehux txgqh vuu dcy 5\n2\n1\n3 1\nusomvghwatx\n5\n2 1\nektg\n2",
      "expected_output": "To be computed",
      "type": "medium_case_6",
      "description": "Generated medium test case"
    },
    {
      "input": "2 1\nqyw lmzki vupx emc glp 3\n1\n5\n6 1\nrnxslrtuzlan\n4\n1 5\nitvcefu\n4",
      "expected_output": "To be computed",
      "type": "medium_case_7",
      "description": "Generated medium test case"
    },
    {
      "input": "3 6\nccgir r xf d xbe 3\n6\n2\n1 3\nc\n3\n3 5\nmylvhezxbck\n5",
      "expected_output": "To be computed",
      "type": "medium_case_8",
      "description": "Generated medium test case"
    },
    {
      "input": "1 2\nate lyoaa mhgi i x 5\n3\n1\n4 6\nbtrlm\n4\n5 4\nnovooyhsmvsm\n5",
      "expected_output": "To be computed",
      "type": "medium_case_9",
      "description": "Generated medium test case"
    },
    {
      "input": "3 2\njztxg div rx bx as 1\n1\n2\n3 1\nruc\n1\n2 3\nhsagebzr\n3",
      "expected_output": "To be computed",
      "type": "large_case_10",
      "description": "Generated large test case"
    },
    {
      "input": "3 3\nrq a jix ffahj hjgd 1\n3\n1\n3 1\nxruwhbk\n1\n1 1\nheps\n1",
      "expected_output": "To be computed",
      "type": "large_case_11",
      "description": "Generated large test case"
    },
    {
      "input": "2 2\ndsq ioh ozd im wey 3\n1\n1\n1 1\nchvttkdmqzj\n2\n1 1\nxrqjlojwatq\n1",
      "expected_output": "To be computed",
      "type": "large_case_12",
      "description": "Generated large test case"
    },
    {
      "input": "3 1\njo fab o m wttdq 3\n1\n3\n2 1\nvc\n1\n2 2\nirlr\n1",
      "expected_output": "To be computed",
      "type": "large_case_13",
      "description": "Generated large test case"
    },
    {
      "input": "1 3\nbwx qr lgmei o d 2\n1\n1\n3 2\navvhmlsnubt\n3\n1 3\nsillhdjurvyd\n3",
      "expected_output": "To be computed",
      "type": "large_case_14",
      "description": "Generated large test case"
    },
    {
      "input": "2 2\njbzx pipk drvq tf apuuy 1\n1\n2\n2 3\ncshefsfx\n1\n3 2\nzndlbv\n2",
      "expected_output": "To be computed",
      "type": "large_case_15",
      "description": "Generated large test case"
    },
    {
      "input": "2 2\ndcxw stc a w re 1\n3\n2\n2 3\nzz\n2\n3 3\ndpazawe\n2",
      "expected_output": "To be computed",
      "type": "large_case_16",
      "description": "Generated large test case"
    },
    {
      "input": "6 6\nrhqlw hqrte k mdtf wvdb 6\n6\n6\n6 6\ngrkucuq\n6\n6 6\nu\n6",
      "expected_output": "To be computed",
      "type": "max_case_17",
      "description": "Generated max test case"
    },
    {
      "input": "6 6\nndb cpj d bbht bag 6\n6\n6\n6 6\nfotxzth\n6\n6 6\nfug\n6",
      "expected_output": "To be computed",
      "type": "max_case_18",
      "description": "Generated max test case"
    },
    {
      "input": "1 2\nkzjja nmlro p skc lhb 1\n6\n5\n1 5\nzihpuaa\n2\n1 1\nkijxfh\n1",
      "expected_output": "To be computed",
      "type": "edge_case_19",
      "description": "Generated edge test case"
    },
    {
      "input": "5 5\nbia sg o bw rdcg 5\n1\n1\n2 5\nclgmucqho\n1\n5 1\nmq\n5",
      "expected_output": "To be computed",
      "type": "edge_case_20",
      "description": "Generated edge test case"
    }
  ],
  "test_cases_generated_at": "2025-08-17 00:51:49",
  "total_test_cases": 20
}