{
  "problem_code": "problems",
  "title": "Light Cycling",
  "tags": [],
  "text": "Having been sucked into your father's secret computer through a projector in the back of his arcade (or something), you find yourself in the wonderful world of Tron! Here, you play games all day, and if you ever lose, you die.One such game involves you and an opponent driving around a flat grid on light cycles, which leave behind a permanent trail of...light...wherever they go. This grid can be modeled with the Cartesian plane, and is enclosed by a rectangle of impenetrable walls which ensure that the x-coordinate of each light cycle is always between $1$ and $10^{12}$, while its y-coordinate is between $1$ and $10^6$ (inclusive). Light cycles always stay on the grid lines, and move at a speed of 1 square per second.A match lasts $S$ ($1 \\leq S \\leq 10^{100}$) seconds. You start at coordinates ($X_A$, $Y_A$) and follow a set of $N_A$ ($1 \\leq N_A \\leq 10^5$) instructions, with your $i$th instruction consisting of moving $L_{Ai}$ squares in the direction given by the character $D_{Ai}$ (with \"U\", \"D\", \"L\", and \"R\" representing up, down, left, and right, respectively). Similarly, your opponent starts at coordinates ($X_B$, $Y_B$) and follows a set of $N_B$ ($1 \\leq N_B \\leq 10^5$) instructions, with their $i$th instruction described by $L_{Bi}$ and $D_{Bi}$. Of course, neither player's instructions will ever take them beyond the boundaries of the walls, and it will take each player exactly $S$ seconds to execute their instructions. Additionally, for each player, no instruction will have an equal or opposite direction to that of their previous instruction. Finally, if a grid point is ever visited more than once throughout the course of the match, it is guaranteed that one of the path segments intersecting there is passing directly through vertically, while the other is passing directly through horizontally (as such, this cannot happen at either player's starting or ending points).Whenever both light cycles reach the same grid point at the same time, or a light cycle hits an existing trail of light (in other words, a grid point which either light cycle had previously passed through), a collision occurs. Because you're just playing a practice match for now, neither player dies when this occurs, and, in fact, the collision is not counted in favour of either you or your opponent. Instead, for $T$ ($1 \\leq T \\leq 20$) scenarios as described above, you're simply interested in the number of collisions that will occur throughout each match.InputFirst line: 1 integer, $T$For each scenario:First line: 1 integer, $S$Next line: 3 integers, $X_A$, $Y_A$, and $N_A$Next $N_A$ lines: 1 character, $D_{Ai}$, and 1 integer, $L_{Ai}$, for $i = 1..N_A$Next line: 3 integers, $X_B$, $Y_B$, and $N_B$Next $N_B$ lines: 1 character, $D_{Bi}$, and 1 integer, $L_{Bi}$, for $i = 1..N_B$OutputFor each scenario:1 integer: The total number of collisions that will occur.ExampleInput:1122 5 5R 4U 1L 1D 4L 23 3 4U 3L 2D 2R 5Output:4Explanation of Sample:The following diagram illustrates the paths of the light cycles (yours drawn in solid lines, and your opponent's drawn in dotted ones), as well as all of the collision points (indicated with large dots):",
  "sample_input": "Input:1122 5 5R 4U 1L 1D 4L 23 3 4U 3L 2D 2R 5Output:4",
  "sample_output": "Not found",
  "link": "https://www.spoj.com/problems/UOFTBF",
  "scraped_at": "2025-08-17 00:34:03",
  "test_cases": [
    {
      "input": "1122 5 5R 4U 1L 1D 4L 23 3 4U 3L 2D 2R 5",
      "expected_output": "4",
      "type": "sample_1",
      "description": "Original sample 1 from problem statement"
    },
    {
      "input": "9 10 7 3 4 8 3 5 8 7 6 7 6 10\n5 4 quab pqyz v k gqpg 9 3 avd bfpf e p 3",
      "expected_output": "0\n0",
      "type": "small_case_2",
      "description": "Generated small test case"
    },
    {
      "input": "10 1 9 8 4 4 8 10 9 3 6 8 2 6\n1 2 dwnu ouq l bkheb gdv 4 3 zj bkf tvhtw f 3",
      "expected_output": "0\n0",
      "type": "small_case_3",
      "description": "Generated small test case"
    },
    {
      "input": "10 8 4 2 8 4 8 6 5 3 10 5 3 4\n5 6 eky buhy npyxd a mzyp 1 7 nfi tie b a 1",
      "expected_output": "0\n0",
      "type": "small_case_4",
      "description": "Generated small test case"
    },
    {
      "input": "3 51 7 71 21 22 31 46 52 32 77 50 57 35\n78 97 w yf xbvbx cmen cmsd 36 90 j ybby gnjn s 29",
      "expected_output": "0\n0",
      "type": "medium_case_5",
      "description": "Generated medium test case"
    },
    {
      "input": "65 87 15 12 81 83 25 59 29 29 37 21 42 32\n93 92 t tk y tugij axdru 13 78 opao dx cwoiy rf 66",
      "expected_output": "0\n0",
      "type": "medium_case_6",
      "description": "Generated medium test case"
    },
    {
      "input": "3 10 11 18 46 74 36 39 32 19 16 3 79 45\n43 98 cxhcd aiq r xqfxg ikqc 68 48 o dr bsvr s 100",
      "expected_output": "0\n0",
      "type": "medium_case_7",
      "description": "Generated medium test case"
    },
    {
      "input": "42 22 85 3 21 96 43 91 46 65 37 86 85 19\n4 23 xwcws lsj uwwrt vmd xbcg 15 21 ttr hn izp zha 96",
      "expected_output": "0\n0",
      "type": "medium_case_8",
      "description": "Generated medium test case"
    },
    {
      "input": "82 71 28 45 84 20 86 48 46 70 42 64 63 61\n50 75 f nk h ebtj g 61 84 yynvy nrxo ua afvyt 79",
      "expected_output": "0\n0",
      "type": "medium_case_9",
      "description": "Generated medium test case"
    },
    {
      "input": "87 84 455 341 300 314 422 433 280 377 256 279 137 119\n426 495 i djrmg z zs vqet 475 328 oks uoi hya kpie 400",
      "expected_output": "0\n0",
      "type": "large_case_10",
      "description": "Generated large test case"
    },
    {
      "input": "167 411 389 196 101 363 365 376 391 183 271 212 53 165\n443 351 fw div igwq ixs gisv 229 152 nex qr bv lvshz 228",
      "expected_output": "0\n0",
      "type": "large_case_11",
      "description": "Generated large test case"
    },
    {
      "input": "209 242 353 344 185 195 498 90 445 421 244 260 450 228\n81 224 w tklsp antp hys tjg 203 326 oowl mqpuz w nkeb 322",
      "expected_output": "0\n0",
      "type": "large_case_12",
      "description": "Generated large test case"
    },
    {
      "input": "481 250 197 140 256 489 232 157 84 441 161 183 381 82\n264 327 tqbbe bvrg bbp axp anob 137 482 gjmy ppjmq m fje 367",
      "expected_output": "0\n0",
      "type": "large_case_13",
      "description": "Generated large test case"
    },
    {
      "input": "59 309 443 367 268 368 257 409 70 103 268 410 161 371\n62 190 njqik sx r f orq 179 341 np qw bci lpwsx 90",
      "expected_output": "0\n0",
      "type": "large_case_14",
      "description": "Generated large test case"
    },
    {
      "input": "481 466 77 331 273 186 175 109 428 331 360 51 128 170\n207 317 r wy fv i hdncj 92 269 tf jao c nwn 384",
      "expected_output": "0\n0",
      "type": "large_case_15",
      "description": "Generated large test case"
    },
    {
      "input": "351 327 243 120 58 64 243 410 346 297 186 421 71 159\n254 339 mw vhejt t pua epkji 104 174 unl bf wlt pwdf 248",
      "expected_output": "0\n0",
      "type": "large_case_16",
      "description": "Generated large test case"
    },
    {
      "input": "1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000\n1000 1000 d vbh ib o wzjfq 1000 1000 ee tnt wazc a 1000",
      "expected_output": "0\n0",
      "type": "max_case_17",
      "description": "Generated max test case"
    },
    {
      "input": "1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000\n1000 1000 es o ehugn src sh 1000 1000 cnp cjz jkgjw mnli 1000",
      "expected_output": "0\n0",
      "type": "max_case_18",
      "description": "Generated max test case"
    },
    {
      "input": "1 1000 999 999 1 1000 1000 1 1000 999 1 1 1000 2\n999 2 k uu yzrd zqmsw vjhc 2 2 nisgq ktd rmil b 2",
      "expected_output": "0\n0",
      "type": "edge_case_19",
      "description": "Generated edge test case"
    },
    {
      "input": "2 1000 1000 999 1 1 1000 1000 1 1 1000 1000 999 2\n1 2 kker nqmw nbx bst i 999 1000 g v gy zbvnk 1",
      "expected_output": "0\n0",
      "type": "edge_case_20",
      "description": "Generated edge test case"
    }
  ],
  "test_cases_generated_at": "2025-08-17 00:51:52",
  "total_test_cases": 20,
  "outputs_generated_at": "2025-08-19 20:37:24"
}