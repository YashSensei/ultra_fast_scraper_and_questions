{
  "problem_code": "problems",
  "title": "Triangle on Binary Tree",
  "tags": [],
  "text": "You are given a parent arrayPof lengthNthat represents a binary tree with N nodes, which may be unbalanced, balanced, complete or full. The array indexes are values in tree nodes and the array values represent the parent node of that particular index, a value -1 means that particular index is the root of the tree. This gives both left child and right child or only left child, for a parent, right child cannot exist without left child. You are required to count the total number of potential isosceles triangles in the binary tree. A potential isosceles triangle is the two sides of equal length must be formed by two paths of equal length from a parent or root. Due to the nature of binary tree, not three sides are connected, you can just ignore the remaining unconnected side.Consider a parent array [1, 5, 5, 2, 2, -1, 3], it constructs a binary tree like:There are 4 potential isosceles triangles in total, they are (1, 5, 2), (0, 5, 4), (3, 2, 4) and (3, 2, 5) respectively.InputThe first line is the number of test casesT. (1 ≤ T ≤ 50)For each test case, it starts with one integer representing the number of nodes or length of the arrayN. (1 ≤ N ≤ 105)The next line has N integers,Piis the node's parent node (-1 is the root) andiis its value. (-1 ≤ Pi≤ N - 1)OutputPrint the total number of potential isosceles triangles.ExampleInput:3\r\n7\r\n1 5 5 2 2 -1 3\r\n20\r\n-1 0 0 1 1 3 5 4 7 4 8 8 9 10 10 9 15 15 16 16\r\n5\r\n3 0 1 -1 2Output:4\r\n20\r\n0ExplanationLet's visualize the sample input:Case 1 is just the sample mentioned above.Case 2 has 20 potential isosceles triangels: (1, 0, 2), (3, 1, 4), (5, 1, 9), (6, 1, 15), (7, 4, 9), (8, 4, 15), (10, 4, 17), (12, 9, 15), (10, 8, 11), (16, 15, 17), (13, 10, 14), (18, 16, 19), (4, 1, 0), (1, 4, 7), (4, 9, 12), (7, 8, 11), (9, 15, 16), (8, 10, 14), (15, 16, 19) and (4, 15, 18).Case 3 has no triangles.",
  "sample_input": "Input:3\r\n7\r\n1 5 5 2 2 -1 3\r\n20\r\n-1 0 0 1 1 3 5 4 7 4 8 8 9 10 10 9 15 15 16 16\r\n5\r\n3 0 1 -1 2Output:4\r\n20\r\n0",
  "sample_output": "Not found",
  "link": "https://www.spoj.com/problems/TRIBT",
  "scraped_at": "2025-08-17 00:33:39",
  "test_cases": [
    {
      "input": "3\r\n7\r\n1 5 5 2 2 -1 3\r\n20\r\n-1 0 0 1 1 3 5 4 7 4 8 8 9 10 10 9 15 15 16 16\r\n5\r\n3 0 1 -1 2",
      "expected_output": "4\r\n20\r\n0",
      "type": "sample_1",
      "description": "Original sample 1 from problem statement"
    },
    {
      "input": "4\n10\n10\n3\n1",
      "expected_output": "0\n0\n0\n0",
      "type": "small_case_2",
      "description": "Small array (N ≤ 5)"
    },
    {
      "input": "5\n10\n8\n2\n4\n6",
      "expected_output": "0\n0\n0\n0\n0",
      "type": "small_case_3",
      "description": "Small array (N ≤ 5)"
    },
    {
      "input": "4\n9\n2\n5\n2",
      "expected_output": "0\n0\n0\n0",
      "type": "small_case_4",
      "description": "Small array (N ≤ 5)"
    },
    {
      "input": "14\n16898436\n59707625\n93421444\n72122309\n52974626\n65041079\n43890411\n34950552\n51933764\n76214035\n47017097\n86075385\n46691414\n41076397",
      "expected_output": "0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0",
      "type": "medium_case_5",
      "description": "Medium array (5 < N ≤ 20)"
    },
    {
      "input": "9\n10103268\n55602706\n27452429\n26707964\n47063760\n89137626\n37384485\n21045278\n57509186",
      "expected_output": "0\n0\n0\n0\n0\n0\n0\n0\n0",
      "type": "medium_case_6",
      "description": "Medium array (5 < N ≤ 20)"
    },
    {
      "input": "16\n34564094\n78879176\n61484713\n64905868\n6747640\n55149118\n6806007\n35575799\n23699998\n54804066\n76428662\n94642354\n56844780\n59303446\n36781913\n62785746",
      "expected_output": "0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0",
      "type": "medium_case_7",
      "description": "Medium array (5 < N ≤ 20)"
    },
    {
      "input": "8\n81297932\n18573812\n13150549\n30456422\n54756628\n16283076\n3557036\n22907715",
      "expected_output": "0\n0\n0\n0\n0\n0\n0\n0",
      "type": "medium_case_8",
      "description": "Medium array (5 < N ≤ 20)"
    },
    {
      "input": "19\n56313319\n36163166\n11066574\n29756542\n41918958\n94645032\n32154267\n1791971\n53721108\n36893336\n25433053\n50864373\n45497642\n60907905\n68560368\n7286887\n12919275\n31844403\n98875227",
      "expected_output": "0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0",
      "type": "medium_case_9",
      "description": "Medium array (5 < N ≤ 20)"
    },
    {
      "input": "26\n11067\n9413\n25853\n39870\n13389\n9858\n35004\n26388\n75450\n40309\n49972\n54931\n80702\n53894\n55788\n46512\n91147\n37977\n48452\n55945\n48125\n94414\n86111\n86593\n29681\n52818",
      "expected_output": "0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0",
      "type": "large_case_10",
      "description": "Large array (20 < N ≤ 500)"
    },
    {
      "input": "91\n50738\n3518\n71535\n45463\n53375\n27267\n64106\n62373\n22128\n12753\n66217\n55547\n6719\n95441\n90288\n1444\n15235\n92167\n95826\n58225\n72652\n35297\n94550\n92327\n75988\n51607\n18881\n45441\n23729\n44072\n91362\n88041\n78206\n27224\n62803\n44724\n15325\n27553\n55172\n94629\n53346\n9049\n61375\n35593\n88507\n15641\n12804\n38057\n17452\n12537\n25565\n15171\n44446\n12882\n61363\n38024\n71394\n46133\n70770\n26501\n99117\n39515\n11420\n28024\n62692\n60298\n29390\n57465\n87413\n7664\n10791\n35404\n52585\n61341\n55923\n34756\n18970\n86192\n90588\n44315\n53157\n1249\n96937\n94921\n50163\n59313\n8490\n57761\n24598\n31868\n65523",
      "expected_output": "0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0",
      "type": "large_case_11",
      "description": "Large array (20 < N ≤ 500)"
    },
    {
      "input": "95\n96028\n29520\n15774\n47533\n75433\n47903\n14923\n78066\n63182\n82731\n82585\n11449\n65184\n80236\n70371\n8183\n11347\n46705\n58258\n75150\n92510\n52343\n91432\n40054\n7736\n41466\n3728\n5964\n24756\n70222\n14175\n59575\n17469\n91907\n2403\n22408\n94393\n48015\n78980\n35763\n62719\n10677\n6390\n95775\n28274\n86726\n41668\n97758\n95069\n74734\n2731\n61638\n90861\n63786\n4110\n44708\n76600\n96221\n38344\n10648\n77585\n43208\n53877\n57787\n36849\n71471\n41918\n62550\n59529\n64841\n9954\n28354\n53062\n90247\n71192\n99517\n70805\n74929\n83559\n16296\n74506\n45225\n53439\n68474\n81087\n66304\n93247\n24304\n72734\n23825\n24624\n34084\n23000\n21758\n55507",
      "expected_output": "0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0",
      "type": "large_case_12",
      "description": "Large array (20 < N ≤ 500)"
    },
    {
      "input": "73\n97250\n76987\n87870\n80349\n48695\n50449\n26350\n30961\n52327\n23732\n100000\n76725\n91348\n68547\n53633\n25811\n37681\n64421\n99094\n70895\n80532\n72599\n95432\n79492\n1136\n14547\n94290\n96487\n69320\n8092\n80587\n70251\n80010\n65121\n2102\n42982\n90838\n71966\n39924\n1228\n53657\n3307\n54301\n55353\n17485\n67010\n90453\n73393\n52372\n52380\n51023\n8109\n58297\n96451\n93730\n11957\n75992\n84818\n35193\n60227\n89584\n62908\n16346\n198\n21373\n93000\n40301\n70628\n65934\n97690\n65130\n29945\n16572",
      "expected_output": "0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0",
      "type": "large_case_13",
      "description": "Large array (20 < N ≤ 500)"
    },
    {
      "input": "79\n87554\n4489\n18002\n43699\n85758\n5223\n97847\n51880\n53010\n28059\n15100\n30928\n51593\n35591\n2806\n18286\n27485\n69495\n28600\n4690\n45382\n62930\n76973\n61176\n77483\n54529\n87409\n93197\n98174\n83016\n82015\n86462\n85962\n11226\n32815\n89916\n52513\n73856\n81384\n91357\n36001\n77002\n23513\n68135\n58477\n53516\n4873\n27799\n86476\n17973\n15364\n92830\n38617\n96411\n87601\n87012\n11357\n10056\n4657\n22913\n27221\n58072\n57029\n85897\n95488\n28715\n48263\n36694\n76525\n6139\n26095\n14861\n94505\n24762\n95140\n22547\n3503\n95778\n79992",
      "expected_output": "0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0",
      "type": "large_case_14",
      "description": "Large array (20 < N ≤ 500)"
    },
    {
      "input": "92\n29563\n45609\n56021\n48077\n93602\n39103\n80564\n83310\n60524\n42399\n2801\n61492\n64337\n68944\n66481\n88927\n12506\n86594\n7778\n21513\n84543\n32301\n43037\n39682\n934\n35418\n12401\n53341\n84044\n26108\n23832\n48343\n17354\n35492\n24788\n12147\n91376\n49209\n83428\n49215\n11344\n3739\n20900\n89257\n75089\n65867\n22557\n13305\n57987\n39486\n3048\n6481\n14568\n71162\n7891\n17946\n15500\n98347\n18006\n8016\n49157\n41672\n63588\n22133\n53277\n12619\n62136\n75043\n20412\n2562\n5526\n53774\n94253\n20883\n72122\n79144\n28481\n34023\n73632\n20440\n41230\n48009\n25672\n57078\n65728\n48758\n80977\n19779\n71367\n59416\n87843\n16252",
      "expected_output": "0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0",
      "type": "large_case_15",
      "description": "Large array (20 < N ≤ 500)"
    },
    {
      "input": "81\n2837\n57729\n44533\n93135\n78757\n73219\n53768\n7655\n82375\n9949\n20477\n67008\n66442\n55283\n52641\n58272\n80235\n41456\n36375\n27001\n90040\n95481\n7646\n73420\n63725\n87584\n24183\n87733\n35982\n56400\n65260\n77272\n48856\n35057\n81018\n29234\n59884\n47607\n8110\n3280\n20874\n77859\n56099\n38649\n41458\n95290\n22853\n46000\n50949\n57141\n92014\n60761\n7160\n38677\n35123\n12445\n31907\n15880\n83121\n5175\n85717\n95403\n73085\n28176\n2115\n23375\n45858\n26603\n57010\n68196\n41518\n20013\n24860\n47516\n71693\n95483\n7098\n60699\n96772\n77922\n17875",
      "expected_output": "0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0",
      "type": "large_case_16",
      "description": "Large array (20 < N ≤ 500)"
    },
    {
      "input": "105\n54252149\n68714692\n36901642\n74198821\n63149813\n64883318\n69984053\n96125841\n22984520\n3595365\n81219149\n24937517\n69763284\n262439\n39754445\n72314295\n1593034\n48809749\n88104896\n5968402\n93300216\n1648733\n63071958\n39447046\n50150865\n57935550\n19375137\n62890143\n38523346\n32080452\n48349129\n82375887\n98762292\n97314791\n46375246\n43203968\n16749721\n53926729\n59799678\n75328177\n11207897\n93684113\n35162218\n64993056\n88868712\n83384587\n31855946\n14375686\n41077938\n96362945\n57741005\n13975335\n57476397\n88898917\n81105668\n74038970\n44748309\n64614479\n28721325\n22202334\n94871248\n76339750\n65203226\n38409499\n68312774\n48047791\n37780805\n3660287\n67377400\n92617893\n24778896\n51208221\n8013805\n87578568\n88395207\n41197220\n86389284\n56902600\n67924775\n70243491\n11185102\n11900426\n75500821\n71194029\n53369573\n95787531\n53444703\n8702588\n80738919\n5546660\n77794420\n80312653\n66916680\n57713398\n58854710\n43008368\n23843129\n32855604\n50769117\n96604737\n25278243\n61838277\n79979110\n70405534\n10531028",
      "expected_output": "0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0",
      "type": "max_case_17",
      "description": "Maximum size array (N = 105)"
    },
    {
      "input": "105\n83708924\n16586419\n29258227\n94220955\n97588161\n38264729\n75962141\n96267098\n50937164\n90059771\n45808462\n93099764\n12585900\n28073776\n86202537\n56493783\n4621786\n45541761\n60140204\n41128995\n27797575\n5758084\n79344291\n74799322\n13701327\n79379533\n28564846\n42572799\n6345649\n65776075\n49407316\n59275323\n57783268\n39073610\n78514055\n38484993\n67464742\n92359101\n83964859\n13865214\n28441370\n25032464\n95893878\n74220841\n32918047\n20378855\n74632077\n44237162\n78582192\n55034569\n71681858\n2764057\n86038102\n19613301\n8788941\n39881671\n67334251\n72905441\n47417507\n95061758\n98248026\n13095475\n56458369\n19490024\n9571923\n383357\n70733512\n31699072\n90123679\n27489930\n45351737\n76993752\n35661541\n1899096\n87193138\n2282049\n54567132\n97643194\n57292013\n90588980\n42585428\n34028649\n37486278\n11576540\n46495825\n95833755\n24696227\n42339778\n36968166\n8184148\n89227160\n59337955\n11929768\n50057295\n50743602\n11852\n99261738\n20837355\n59392140\n87506294\n64299537\n29861666\n81310674\n31126210\n97770302",
      "expected_output": "0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0",
      "type": "max_case_18",
      "description": "Maximum size array (N = 105)"
    },
    {
      "input": "2\n1\n81334512",
      "expected_output": "0\n0",
      "type": "edge_case_19",
      "description": "Edge case array (N = 2)"
    },
    {
      "input": "1\n44869445",
      "expected_output": "0",
      "type": "edge_case_20",
      "description": "Edge case array (N = 1)"
    }
  ],
  "test_cases_generated_at": "2025-08-17 00:51:50",
  "total_test_cases": 20,
  "outputs_generated_at": "2025-08-19 20:37:05"
}