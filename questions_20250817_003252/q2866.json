{
  "problem_code": "problems",
  "title": "Correlations",
  "tags": [],
  "text": "Finishing your studies in a university is not only a matter of studying and learning. To obtain that prized degree, each student has to prove that he has learned, and in order to do that he needs to passNsubjects. However, it is often also necessary to abide by uncountable and deliberately complicated regulatory labyrinths.At theInstitute With Few Correlations(IWFC) there are antiquated norms which forbid students from passing some subjects without having first passed certain other subjects. The latter are called \"correlation\" subjects for the first ones. Each subject may have one or more correlation subjects, but there are no cyclic correlations, so that it is always possible to obtain the desired degree.Gabina is a student of Happiness Sciences, and fortunately her professors are very understanding people. They therefore allow her to pass her subjects without actually having passed their correlation subjects before. The problem with this is that IWFC's electronic system can only register a subject as being passed abiding by the correlation rules. Thus, a subject will be registered in the system if and only if it was passed and all its correlation subjects are also already registered.Seeing her progress keeps Gabina motivated, and helps her to push forward with her studies. For this reason, each time she passes a subject she checks the electronic system to see how many subjects have been registered in it. Sometimes she sees the number has not changed, which happens whenever the subject she just passed didn't have all its correlation subjects registered in the system. In other cases, she receives the delightful news that the number of registered subjects has increased. Moreover, it may happen that this increase was in more than one, which happens whenever the subject she just passed could be registered, and doing so unlocked the registration of a series of subjects passed beforehand.Gabina has already planned the order in which she will pass all the subjects for her degree. She would now like to know the number of subjects which will be registered in the electronic system after she passes each one of them. Your task is to write a program to help Gabina predict this, so that she can joyfully finish her Happiness Sciences studies.InputThere are multiple test cases in the input file. The first line contains two integer numbersNandM, representing the number of subjects in her degree and the number of correlation relations between pairs of subjects, respectively (1≤N,M ≤ 5 × 104). The subjects are numbered from1toN. Each of the followingMlines contains two integer numbersAandB, indicating that subjectAis a correlation subject for subjectB(1≤A, B≤NwithA ≠ B). This means that subjectAmust be registered in the electronic system before subjectBcan be registered. There are no repeated or cyclic correlation relations in the input. The last line containsNinteger numbersP1, P2, ..., PN, representing the subjects in the order Gabina will pass them (1≤Pi≤Nfori = 1, ..., N, withPi≠ Pjfori ≠ j).OutputFor each test case, printNlines, each with a single integer number. The number printed in thei-th line represents the number of subjects registered in the electronic system immediately after Gabina passes thei-th subject for her degree in the order giver in the input.ExampleInput:3 2\r\n1 2\r\n2 3\r\n1 2 3\r\n3 2\r\n1 2\r\n2 3\r\n3 2 1\r\n4 4\r\n1 2\r\n2 3\r\n4 3\r\n1 4\r\n2 3 1 4Output:1\r\n2\r\n3\r\n0\r\n0\r\n3\r\n0\r\n0\r\n2\r\n4",
  "sample_input": "Input:3 2\r\n1 2\r\n2 3\r\n1 2 3\r\n3 2\r\n1 2\r\n2 3\r\n3 2 1\r\n4 4\r\n1 2\r\n2 3\r\n4 3\r\n1 4\r\n2 3 1 4Output:1\r\n2\r\n3\r\n0\r\n0\r\n3\r\n0\r\n0\r\n2\r\n4",
  "sample_output": "Not found",
  "link": "https://www.spoj.com/problems/TAP2016C",
  "scraped_at": "2025-08-17 00:34:17"
}