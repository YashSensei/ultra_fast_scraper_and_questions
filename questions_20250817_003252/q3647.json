{
  "problem_code": "problems",
  "title": "Queen and Stable Relationships",
  "tags": [],
  "text": "Swayamvara, in ancient India, was a practice of choosing a husband, from a list of suitors by a girl of marriageable age.It is the Swayamvara of gossip queen of IIIT, Akshata. Now, Akshata is always interested in knowing the stability of the relationships among various students of IIIT. Nowadays she is very busy in her Swayamvara’s preparation and is not able to update herself about the latest gossips. As you know she is the gossip queen. She would love if someone could do her a favor and collect answers of her questions about relationships in IIIT. It might increase the collector’s chance of getting selected for marriage.Before starting preparations for the Swayamvara, Akshata used to maintain notes about the relationships in IIIT and knew all about them. So she thought she can help you by providing the notes.There are various ways in which two people can be acquaintances:IfAandBare in a relationship, thenAandBare acquaintances of each other.IfAandBare acquaintances of each other andBandCare acquaintances of each other, thenAandCare also acquaintances of each other.In Akshata's notes, a relationship betweenperson1andperson2is represented as \"person1 person2\". The Queen's questions are also special.There are two types of questions:First type of query is whether two people, sayAandB, still remain each others’ acquaintances even if two people, sayCandD, break-up and end their relationship.Second type of query is whether two people, sayAandB, still remain acquaintances even if a person, sayC, leaves the college (It’s obvious that before leaving college,Cends all his/her relationships).InputFirst line of the input contains two integers,NandMwhereNrepresents the number of people in IIIT andMrepresents the number of relationships in Akshata’s notes.The nextMlines contain2strings each, containing the names of2people who are in a relationship.Next line contains a single integerQ, which represents the number of questions asked by the Queen. Each of the nextQlines represents a query. For every query first integer represents the query type.If the query type is1then it is followed by four strings in the same line, representingA B C and D. you have to output \"STABLE\" ifA and Bremain acquaintances of each other even ifC and Dbreak up and \"NOT STABLE\" otherwise.If the query type is2then it is followed by three strings in the same line, representingA B and C. You have to output \"STABLE\" ifA and Bremain acquaintances even ifCleaves college otherwise output \"NOT STABLE\". (All quotes for clarity)OutputFor every query output \"STABLE\" or \"NOT STABLE\" without quotes.Constraints1 ≤ N ≤ 100001 ≤ M ≤ 500001 ≤ Q ≤ 10000Size of all strings will be less than 50 characters.ExampleInput 1:3 2\r\nPerson1 Person2\r\nPerson1 Person3\r\n2\r\n2 Person2 Person3 Person1\r\n1 Person1 Person2 Person1 Person3Output 1:NOT STABLE\r\nSTABLEExplanation of Example 1Person1 is in a relationship with Person2 and Person1 is also in a relation with Person3. So Person3 and Person2 are acquaintances.First Query:Person2 and Person3 are acquaintances of each other only because of Person1, if Person1 leaves the college, then Person2 and Person3 are no longer acquaintances of each other.Second Query:Person1 will remain being acquaintance of Person2 even if Person1 breaks-up with Person3.Input 2:17 18\r\nPerson1 Person2\r\nPerson1 Person4\r\nPerson2 Person4\r\nPerson4 Person6\r\nPerson2 Person6\r\nPerson2 Person3\r\nPerson3 Person5\r\nPerson1 Person7\r\nPerson7 Person8\r\nPerson7 Person9\r\nPerson7 Person10\r\nPerson9 Person12\r\nPerson8 Person12\r\nPerson8 Person11\r\nPerson12 Person13\r\nPerson14 Person15\r\nPerson15 Person16\r\nPerson16 Person17\r\n8\r\n2 Person1 Person14 Person7\r\n2 Person1 Person2 Person2\r\n1 Person1 Person14 Person2 Person4\r\n1 Person5 Person13 Person1 Person2\r\n1 Person6 Person2 Person1 Person4\r\n1 Person13 Person6 Person7 Person8\r\n2 Person13 Person6 Person7\r\n2 Person13 Person6 Person8\r\n2 Person13 Person8 Person7Output 2:NOT STABLE\r\nNOT STABLE\r\nNOT STABLE\r\nSTABLE\r\nSTABLE\r\nSTABLE\r\nNOT STABLE\r\nSTABLEProblem Setter: Mayank Natani",
  "sample_input": "Input 1:3 2\r\nPerson1 Person2\r\nPerson1 Person3\r\n2\r\n2 Person2 Person3 Person1\r\n1 Person1 Person2 Person1 Person3Output 1:NOT STABLE\r\nSTABLE",
  "sample_output": "Input 2:17 18\r\nPerson1 Person2\r\nPerson1 Person4\r\nPerson2 Person4\r\nPerson4 Person6\r\nPerson2 Person6\r\nPerson2 Person3\r\nPerson3 Person5\r\nPerson1 Person7\r\nPerson7 Person8\r\nPerson7 Person9\r\nPerson7 Person10\r\nPerson9 Person12\r\nPerson8 Person12\r\nPerson8 Person11\r\nPerson12 Person13\r\nPerson14 Person15\r\nPerson15 Person16\r\nPerson16 Person17\r\n8\r\n2 Person1 Person14 Person7\r\n2 Person1 Person2 Person2\r\n1 Person1 Person14 Person2 Person4\r\n1 Person5 Person13 Person1 Person2\r\n1 Person6 Person2 Person1 Person4\r\n1 Person13 Person6 Person7 Person8\r\n2 Person13 Person6 Person7\r\n2 Person13 Person6 Person8\r\n2 Person13 Person8 Person7Output 2:NOT STABLE\r\nNOT STABLE\r\nNOT STABLE\r\nSTABLE\r\nSTABLE\r\nSTABLE\r\nNOT STABLE\r\nSTABLE",
  "link": "https://www.spoj.com/problems/QSTABLE",
  "scraped_at": "2025-08-17 00:34:27"
}