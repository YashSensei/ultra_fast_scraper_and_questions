{
  "problem_code": "problems",
  "title": "Boring Factorials (Extended)",
  "tags": [],
  "text": "Factorial is one of the most attractive word this week, it is proposed to reload a famousproblem. Is it so boring ? \r\n\r\nAs thereload editionwasn't hard enough, we'll extend constraints.\r\n\r\n\r\n\r\n\r\nSameer and Arpit want to overcome their fear of Maths and so they have been recently practicing Maths problems a lot. Aman, their friend has been helping them out. But as it goes, Sameer and Arpit have got bored of problems involving factorials. Reason being, the factorials are too easy to calculate in problems as they only require the residue modulo some prime and that is easy to calculate in linear time. So to make things interesting for them, Aman - The Mathemagician, gives them an interesting task. He gives them a prime numberPand an integerN(not so) close toP, and asks them to findN! modulo P. He asksTsuch queries.InputThe first line of input contains an integerT, the number of test cases.\r\nOn each of the nextTlines, your are given\r\ntwo integersN, andPa prime number.OutputFor each test case, you have to printN! modulo P.ExampleInput:3\r\n2 5\r\n5 11\r\n21 71Output:2\r\n10\r\n6Constraints0 < T < 10^3\r\n0 < N < 10^100\r\n1 < P < 10^100, a prime number\r\nAbs(N-P) < 10^6Problem designed to be solvable using some 'slow' languages like Python (333B of code) in the third of the time_limit.Warning: To get AC here, you need to get around 1000 points (approx) inchallenge edition.\r\nMy best python code get AC under 5s. (edit 2017-02-11, after compiler changes)\r\n\r\n;-) Have fun.",
  "sample_input": "Input:3\r\n2 5\r\n5 11\r\n21 71",
  "sample_output": "Output:2\r\n10\r\n6",
  "link": "https://www.spoj.com/problems/BORING2",
  "scraped_at": "2025-08-17 00:33:30"
}