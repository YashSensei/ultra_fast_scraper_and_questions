{
  "problem_code": "problems",
  "title": "Ada and Travelling Salesman",
  "tags": [],
  "text": "Ada the Ladybug lives in Bugladesh. It is a very specific country - there are plenty of cities, but since the government doesn't \"waste\" money, there is only one simple path between each pair of cities.Ada is working as Traveling Salesman. She travels between cities, buying and selling products. A product has fixed price in each city (same for buy/sale). Since Ada travels with bike (to avoid payments for travels) so she can carry at most one item at a moment.She is currently in some city, and she wants to choose such city, that she will make as much money as possible by travelling to that city (by simple path). Can you help her?InputThe first line will contain0 < N ≤ 105, 0 < Q ≤ 5×105, number of cities and number of queries respectively.Then one line withNintegers follow,1 ≤ Ai≤ 109, the price inithcity.AfterwardN-1lines follow, each containing two numbers0 ≤ i, j < N(i ≠ j), meaning that there is a simple path between cityiand cityj.ThenQlines follows, each containing exactly one integer0 ≤ i < N- the city in which Ada begins.OutputPrintQlines, the maximal amount of money, Ada can earn.Example Input6 6\r\n1 2 3 4 5 4\r\n1 0\r\n1 2\r\n1 3\r\n3 4\r\n4 5\r\n0\r\n1\r\n2\r\n3\r\n4\r\n5Example Output4\r\n3\r\n3\r\n1\r\n1\r\n2Example Input5 2\r\n1 5 2 4 3\r\n0 1\r\n1 2\r\n2 3\r\n3 4\r\n0\r\n2Example Output6\r\n3Output explanations [Possible destination cities of first example input]4\r\n4\r\n4\r\n2\r\n2\r\n2Note that some of the destinations might have ended somewhere else, but it would result in same income!",
  "sample_input": "6 6\r\n1 2 3 4 5 4\r\n1 0\r\n1 2\r\n1 3\r\n3 4\r\n4 5\r\n0\r\n1\r\n2\r\n3\r\n4\r\n5",
  "sample_output": "4\r\n3\r\n3\r\n1\r\n1\r\n2",
  "link": "https://www.spoj.com/problems/ADASALES",
  "scraped_at": "2025-08-17 00:33:20"
}