{
  "problem_code": "problems",
  "title": "Periodic Points",
  "tags": [],
  "text": "Computing the number of fixed points and, more generally, the number of periodic orbits within a dynamical system is a question attracting interest from different fields of research. However, dynamics may turn out to be very complicated to describe, even in seemingly simple models. In this task you will be asked to compute the number of periodic points of periodnof a piecewise linear mapfmapping the real interval [0,m] into itself. That is to say, given a mapf: [0,m] → [0,m] you have to calculate the number of solutions to the equationfn(x) =xforx∈ [0,m], wherefnis the result of iterating functionfa total ofntimes, i.e.fn=nf′s◢◣f∘ .. ∘f∘f,where ∘ stands for the composition of maps, (g∘h) (x) =g(h(x)).Fortunately, the maps you will have to work with satisfy some particular properties:mwill be a positive integer and the image of every integer in [0,m] underfis again an integer in [0,m], that is, for everyk∈ {0, 1, … ,m} we have thatf(k) ∈ {0, 1, … ,m}.For everyk∈ {0, 1, …,m− 1}, the mapfis linear in the interval [k,k+ 1]. This means that for everyx∈ [k,k+ 1], its image satisfiesf(x) = (k+ 1 −x)f(k) + (x−k)f(k+ 1), which is equivalent to its graph on [k,k+ 1] being a straight line segment.Figure 1: Graphs of the third map in the sample input,f3(left), and of its square,f32(right).Since there might be many periodic points you will have to output the result modulo an integer.InputThe input consists of several test cases, separated by single blank lines. Each test case begins with a line containing the integerm(1 ≤m≤ 80). The following line describes the mapf; it contains them+ 1 integersf(0),f(1), …,f(m), each of them between 0 andminclusive. The test case ends with a line containing two integers separated by a blank space,n(1 ≤n≤ 5 000) and the modulus used to compute the result,mod(2 ≤mod≤ 10 000).The input will finish with a line containing0.OutputFor each case, your program should output the number of solutions to the equationfn(x) =xin the interval [0,m] modulomod. If there are infinitely many solutions, printInfinityinstead.Sample Input2\r\n2 0 2\r\n2 10\r\n\r\n3\r\n0 1 3 2\r\n1 137\r\n\r\n3\r\n2 3 0 3\r\n20 10000\r\n\r\n0Sample Output4\r\nInfinity\r\n9074Problemsetter: Luis Hernández Corbato",
  "sample_input": "2\r\n2 0 2\r\n2 10\r\n\r\n3\r\n0 1 3 2\r\n1 137\r\n\r\n3\r\n2 3 0 3\r\n20 10000\r\n\r\n0",
  "sample_output": "4\r\nInfinity\r\n9074",
  "link": "https://www.spoj.com/problems/PERIODIC",
  "scraped_at": "2025-08-17 00:33:46"
}