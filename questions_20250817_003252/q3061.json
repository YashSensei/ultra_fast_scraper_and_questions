{
  "problem_code": "problems",
  "title": "Ada and Furrows",
  "tags": [],
  "text": "As you might already know, Ada the Ladybug is a farmer. She has multiple furrows in which she grows vegetables. She also never grows multiple vegetables of the same kind in the same furrow. Ada sometime plants a new vegetable, harvest a vegetable or asks for some aspect which two different furrows have in common (described in input).InputThe first line of input will contain1 ≤ Q ≤     3*105, the number of queries.Each of the nextQlines will contain? x y:0 ≤ x, y     ≤ 2*104, and?is one of:+ - v ^ ! \\with following meaning:+: Plants vegetable of kindyto furrow numberx(note that there will never be multiple vegetables of the same kind in the same furrow)-: Harvests vegetable of kindyfrom furrow numberx(note that there will always be a vegetable of that kind)v: Finds out how many kinds of vegetables there are in furrowsxandy.^: Finds out how many kinds of vegetable are in both furrows (x, y)!: Find out how many kinds of vegetables are inxandyBUTnot in both of them at once.\\: Find out how many kinds of vegetable are inxbut not inyOutputFor each query of the last four kinds, output the proper answer.Example Input10\r\n+ 1 4\r\n! 0 2\r\n+ 0 2\r\n\\ 0 2\r\n^ 0 1\r\nv 2 0\r\n+ 2 4\r\n! 2 0\r\n+ 1 0\r\n! 0 2Example Output0\r\n1\r\n0\r\n1\r\n2\r\n2Example Input15\r\n+ 0 2\r\n! 0 1\r\n+ 1 1\r\nv 0 1\r\n+ 1 2\r\n! 1 0\r\n! 0 1\r\n+ 0 0\r\nv 0 1\r\n^ 0 1\r\n+ 1 3\r\n\\ 1 0\r\n\\ 1 0\r\n+ 1 0\r\n- 1 2Example Output1\r\n2\r\n1\r\n1\r\n3\r\n1\r\n2\r\n2Example Input10\r\n+ 2 1\r\n! 3 1\r\n! 3 1\r\n+ 1 1\r\n\\ 2 0\r\n+ 3 1\r\nv 2 3\r\n! 2 3\r\n- 1 1\r\n^ 1 2Example Output0\r\n0\r\n1\r\n1\r\n0\r\n0",
  "sample_input": "10\r\n+ 1 4\r\n! 0 2\r\n+ 0 2\r\n\\ 0 2\r\n^ 0 1\r\nv 2 0\r\n+ 2 4\r\n! 2 0\r\n+ 1 0\r\n! 0 2",
  "sample_output": "0\r\n1\r\n0\r\n1\r\n2\r\n2",
  "link": "https://www.spoj.com/problems/ADAFUROW",
  "scraped_at": "2025-08-17 00:34:07"
}