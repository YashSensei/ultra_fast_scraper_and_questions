{
  "problem_code": "problems",
  "title": "Permutation Exponentiation",
  "tags": [],
  "text": "Alice, a permutation aficionado, has thought up a permutation ofN(1 ≤N≤ 100000) integers in the range [0,N-1],P.  So impressed with herself she has told her friend Bob aboutP.Normally Alice would call it a day after creating such an impressive permutation but today she decided that she wanted to raisePto the powerk(a positive integer) as well!  Unfortunately, after working on the problem for a while she gave up because it was taking too long.  Not wanting her efforts to go to waste she once again tells Bob about all the elements she has determined so far.  Unfortunately, she neglected to tell Bob the valuek.Bob, very interested in Alice's work, needs your help to try and determine any additional elements ofPk.  Bob is suspicious of Alice's work so he also asks you to check it for errors.NotesFor two permutationsP,Q, theith element of the product,(P × Q)[i], can be computed asQ[P[i]]where arrays are all 0-indexed.ThenPkis simplyP×P× ...ktimes ... ×P.InputThe first line of input containsN(1 ≤N≤ 100000), the number of elements in the permutation.  The next line contains a permutation of the integers 0 throughN-1 each separated by a space.  The following line will contain the result of applying the permutationktimes with the exception that elements that are not known will be -1 instead.OutputPrintPkas a space separated list on its own line with as many elements as possible determined.  If an element can't be determined leave it as -1.  If there is noksuch thatPkhas the values given in the input print \"Inconsistent\" (quotes for clarity) on its own line instead.ExampleInput:4\r\n1 2 3 0\r\n3 -1 -1 -1Output:3 0 1 2Note: The first four permutations generated are\r\n\r\n1 2 3 0\r\n2 3 0 1\r\n3 0 1 2\r\n0 1 2 3Example 2Input:4\r\n1 2 3 0\r\n3 -1 2 -1Output:Inconsistent",
  "sample_input": "Input:4\r\n1 2 3 0\r\n3 -1 -1 -1Output:3 0 1 2",
  "sample_output": "Note: The first four permutations generated are\r\n\r\n1 2 3 0\r\n2 3 0 1\r\n3 0 1 2\r\n0 1 2 3",
  "link": "https://www.spoj.com/problems/PERMSG",
  "scraped_at": "2025-08-17 00:34:12"
}