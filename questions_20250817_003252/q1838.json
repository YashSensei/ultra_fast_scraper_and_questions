{
  "problem_code": "problems",
  "title": "Tree",
  "tags": [],
  "text": "Consider an n-vertex binary search tree T containing n keys 1, 2 ... n. A \r\n\tpermutation p = [p1... pn] of the integers 1, 2 ... n is \r\n\tsaid to beconsistent with the tree Tif the tree can be built from the \r\n\tempty one as the result of inserting integers p1, p2... pn. \r\n\tFind how many permutations are consistent with the tree T.IllustrationExactly 2 permutations are consistent with the tree in the figure below.TaskWrite a program that for each data set from a sequence of several data sets:reads from the input file a description of an input tree T,computes the number of permutations consistent with T,writes the result to output.InputThe first line of the input file contains one positive integer d not larger \r\n\tthan 10. This is the number of data sets. The data sets follow. Each set of \r\n\tdata occupies two consecutive lines of the input file. The first line contains \r\n\tonly one integer n, 1 <= n <= 30. This is the number of vertices of the \r\n\ttree. The second line contains a sequence of n integers separated by single \r\n\tspaces. The integers are keys in the input tree given in the prefix order. The \r\n\tfirst integer in the sequence is the key from the root of the tree. It is \r\n\tfollowed by the keys from the left subtree written in the prefix order. The \r\n\tsequence ends with the keys from the right subtree, also given in the prefix \r\n\torder.OutputFor each i = 1 ... d, your program should write to the i-th line of output \r\n\tthe number of permutations consistent with the tree described in the i-th \r\n\tdata set.ExampleSample input:\r\n5 \r\n3 \r\n2 1 3 \r\n3 \r\n1 2 3 \r\n1 \r\n1 \r\n4 \r\n2 1 3 4 \r\n4 \r\n1 4 2 3 \r\n\r\nSample output:\r\n2 \r\n1 \r\n1 \r\n3 \r\n1",
  "sample_input": "Sample input:\r\n5 \r\n3 \r\n2 1 3 \r\n3 \r\n1 2 3 \r\n1 \r\n1 \r\n4 \r\n2 1 3 4 \r\n4 \r\n1 4 2 3 \r\n\r\nSample output:\r\n2 \r\n1 \r\n1 \r\n3 \r\n1",
  "sample_output": "Not found",
  "link": "https://www.spoj.com/problems/TREE1",
  "scraped_at": "2025-08-17 00:33:46"
}