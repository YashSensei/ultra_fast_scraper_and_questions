{
  "problem_code": "problems",
  "title": "Song Contest",
  "tags": [],
  "text": "Every year, the continent of Cacophonea organises the Cacophonean Song Contest, for which each\r\nof its nations presents an act by a national singer or group. Each Cacophonean inhabitant may\r\ntelevote for any act which is not from his nation, so a nation can never vote for its own act. In\r\nthe end, each of thesCacophonean nations will award points toracts. The act which received\r\nmost votes from a certain nation will getrpoints from this nation, the act with the second largest\r\namount of votes will getr- 1 points, etc., so the act with therth largest amount of votes gets 1\r\npoint and less popular acts get no points from the voting nation. The final ranking of the song\r\ncontest will then be decided by the total amount of points each nation received.Music producer Dustin has been eagerly following the Cacophonean Song Contest for many\r\nyears. Lately, he has observed that in certain nations, televotes are politically rather than artistically motivated:(1) Politically voting nations prefer acts from neighbouring nations. More specifically, the Euclidean distance between their capital and another nation's capital is their popularity measure, irregardless of the artistic quality of the corresponding act. Hence, the nation with the\r\nclosest capital will get most votes and the nation with the farthest capital will receive the\r\nleast votes, which could yield no points at all ifr<s- 1. It will never occur that two or\r\nmore capitals will have the same distance to a certain capital.(2) Nations that vote quality-motivated will, as the name suggests, award points to nations\r\naccording to an indisputable act ranking based on each act's artistic quality. In this ranking,\r\nthere will be no ties so each nation has its own unique rank.However, Dustin has heard he can influence the voting behaviour of other nations: an artist can\r\nfind favour of politically voting nations by giving them special attention during his act (e.g. by\r\nsinging parts in their local dialects, waving their flags, etcetera). The more a politically voting\r\nnation will receive such attention in an act, the higher it will rank it. Of course this will be at the\r\ncost of the original act and might result in terribly campy results. Therefore, nations that vote\r\naccording to artistic quality will punish such behaviour.More specifically, Dustin can divide an act into exactlys- 1 parts. Originally, all parts are\r\ndedicated to the nation of the performer (i.e. they reflect his original artistic ideas), but this can\r\nbe changed:(1) For each part in the act that will be dedicated to a certain politically voting nation, that\r\nnation will rank the performer's nation one place higher (unless the performer's nation is\r\nalready ranked first). As each nation has a unique ranking position, the nation that originally\r\nwas at that higher rank will then be ranked one place lower.(2) Quality-motivated voting nations do not like these soft-soaping attempts at all. Therefore,\r\nfor each part in the act that will be dedicated to a nation which is not the original performer's\r\nnation, quality-motivated nations will rank the original performer's nation one place lower\r\n(unless the performer's nation is already ranked lowest).Only the fact that a certain amount of parts is dedicated to a certain nation will influence voting\r\nbehaviour: the exact part dedication sequence in the total act is not of interest here.Dustin wants to use this knowledge (which no other Cacophonean producer has) to produce a\r\nsmashing act, yielding as much points in the overall results as possible. You are asked to determine\r\nwhat the largest possible overall point score is he can obtain for an act, when he optimally exploits\r\nthe described act-changing practices.InputThe first line of input consists of the integer numbern, the number of test cases;Then, for each test case:A line with an integer numbers(1 <s<= 100), indicating the number of participating\r\nnations in the song contest;Then, for each nation:(1) A line containing:(1.1) A stringc(not containing any spaces) with the nation's name, followed by a\r\nspace. Within a test case, there will not be multiple nations sharing the same\r\nname;(1.2) A character indicating the nation's voting behaviour:qif the voting behaviour\r\nis quality-motivated andpif the behaviour is politically motivated.(2) A line containing:(2.1) The location of the nation's capital, expressed in an (x, y) integer coordinate\r\n(-10000 <= x <= 10000, -10000 <= y <= 10000). x and y are separated by a\r\nspace. Furthermore, y is followed by a space;(2.2) The actual artistic quality rankqof the nation's act. This is a unique number\r\nin the range 1...s.After description of each nation:A line with an integer numberr(0 <r<=s- 1), indicating to how many nations each\r\nnation will attribute points;A line with the name of the nation for which Dustin should produce a song, achieving\r\nas much points as possible.OutputFor each test case, the output contains a single line with a single integer number: the maximal amount of points an act can obtain in the overall final score, if act-changing practices were performed in an optimal way.ExampleInput:2\r\n3\r\nAulatrias q\r\n0 0 1\r\nBinen q\r\n5 0 2\r\nCahin q\r\n0 -4 3\r\n2\r\nCahin\r\n3\r\nAulatrias p\r\n0 0 1\r\nBinen p\r\n5 0 2\r\nCahin p\r\n0 -4 3\r\n2\r\nBinenOutput:2\r\n4",
  "sample_input": "Input:2\r\n3\r\nAulatrias q\r\n0 0 1\r\nBinen q\r\n5 0 2\r\nCahin q\r\n0 -4 3\r\n2\r\nCahin\r\n3\r\nAulatrias p\r\n0 0 1\r\nBinen p\r\n5 0 2\r\nCahin p\r\n0 -4 3\r\n2\r\nBinenOutput:2\r\n4",
  "sample_output": "Not found",
  "link": "https://www.spoj.com/problems/SONG",
  "scraped_at": "2025-08-17 00:33:09"
}