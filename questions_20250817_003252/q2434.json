{
  "problem_code": "problems",
  "title": "Bouncing Balls II",
  "tags": [],
  "text": "\"Behold, my queen\", said the jester, \"the great Bouncing Ball Bowl!\" The queen boredly waved her hand and sarcastically replied: \"Let the fun begin!\". And the fun begun! The jester spoke a magic word and all the colorful balls in his bowl started to roll and bounce, creating interesting pictures.The queen watched vividly for a few minutes, but then she started to be bored again. \"Just wait a moment, Your Majesty, in a minute they'll…\" started the jester, but the queen interrupted: \"I'm a queen! I don't want to wait! Can't you just fast forward it or something?\"Problem specificationThe jester's box is anX*Y(1<=X,Y<=5000) rectangle. The rectangle containsN(N<=3001) small balls. At any moment, each ball is travelling at the same speed in one of the four diagonal directions.The movement of the balls is continuous and for the purpose of this problem we may consider them to be points. When two or more balls meet, they bounce in a way described below.Your task is to determine the state of the box at given moments in time.Bouncing specificationBouncing does not change the speed of the balls. Following images show how the balls bounce off each other, and also off walls. Each image can be rotated arbitrarily. For example, the first image shows that whenever two balls meet at a right angle, they bounce and depart at a right angle again. One particularly tricky case is shown in the third image.Input specificationThe input starts with a line containing the dimensionsXandYof the box. We will use a coordinate system with axes parallel to the sides of the box, (0,0) at one of the corners and (X,Y) at the opposite corner.The second line contains the number of ballsN.Each of the nextNlines contains four integers x,y,vx,vy, where (x,y) are the coordinates of one ball at time 0 and (vx,vy) is its current velocity vector. (Each ball will be strictly inside the box and for each ball both the absolute values of vx and vy will be equal to 1. No two balls will start at the same place.)The following line contains the number of queen's requests M.(1<= M <=20)On the last line there are M numbers t1,…,tM– the points in time the queen wants to see. These numbers will be less than 1012.Output specificationAs a solution to this problem, we expect a file with M blocks, with the i-th block describing the situation at time ti.Each block must contain N lines, and each line must contain the x and y coordinates of one ball. The balls in each block must be sorted – primarily by to their first, secondarily by their second coordinate at that point in time.You may output an empty line between the blocks.ExampleInput:6 4\r\n4\r\n1 2 1 1\r\n5 2 1 1\r\n2 1 1 -1\r\n3 1 -1 -1\r\n1\r\n4Output:1 3\r\n3 2\r\n5 2\r\n6 3Note that the balls that start at (2,1) and (3,1) bounce off each other at a non-integer point in time.",
  "sample_input": "Input:6 4\r\n4\r\n1 2 1 1\r\n5 2 1 1\r\n2 1 1 -1\r\n3 1 -1 -1\r\n1\r\n4Output:1 3\r\n3 2\r\n5 2\r\n6 3",
  "sample_output": "Not found",
  "link": "https://www.spoj.com/problems/BOBALLS2",
  "scraped_at": "2025-08-17 00:33:56"
}