{
  "problem_code": "problems",
  "title": "Guess the Queue",
  "tags": [],
  "text": "Busland is a city where the only means of transportation are buses. To get on a bus in Busland, people have to wait in a queue. Each person has auniquebusID. The person at the front is considered the first person and the person at the back is considered the last person in the queue. Trivially, the first person will get on the bus first and the last person will get on last.It is well known that you should enter at the back of the queue. However, some people are very late and even though it is considered very rude, they try to enter in an alternative way. Since the sides of the queue are barricaded, the only alternative way is to enter from the front of the queue. Sometimes there are also people at the back of the queue, who become tired of waiting. They exit the queue from the back and just start walking to their destination instead.Your task is to deal with three types of operations as follows:'1x y' The person withIDyenters from the back or front, ifxis 'B' or 'F' respectively.'2x' The person in the back or front exits the queue, ifxis 'B' or 'F' respectively.'3x y' Find theIDof the person in theyth position of the queue or the position of the queue, where the person withIDyis currently situated, ifxis 'D' or 'P' respectively.InputThe first line of input will contain the number of test cases,T(1 <=T<= 5). ThenTcases follow.Each case starts with an integerN, denoting the total number of operations. The followingNlines will contain one of the three types described previously. The operations are in chronological order.It is guaranteed that the given input is always valid. Thus, for the second type operation, the queue will always be non-empty and for the third type, the given position orIDwill always exist in the queue. Also, a person who has already exited, will not enter the queue again.ConstraintsFor theeasyversion,1 <=N<= 2000For thehardversion,1 <=N<= 200000In general,1 <= each ID <= 10^9,IDs areuniquefor each person.1 <= each position <= current size of the queue.OutputFor each case, print the case number on a single line, in the format “Case x:”, wherexis the case number.For each operation of the third type, output a single integer, which denotes the answer of the query.ExampleInput:1\r\n7\r\n1 B 1\r\n1 B 2\r\n1 F 3\r\n3 D 3\r\n2 B\r\n1 F 4\r\n3 D 2Output:Case 1:\r\n2\r\n3Explanation of the SampleThere is only 1 test case, in which we have to perform a total of 7 operations.At first, the queue is empty. A person withID 1and2enters from the back. After that, a person withID 3enters from the front. Now there are3people in the queue and theIDof the3rdperson in the queue is2.The person in the back (who hasID 2) exits the queue. This leaves only two people remaining.Finally, a person withID 4enters from the front. Now there are again3people in the queue and theIDof the2ndperson of the queue is3.Problem Setter: Aninda Majumder",
  "sample_input": "Input:1\r\n7\r\n1 B 1\r\n1 B 2\r\n1 F 3\r\n3 D 3\r\n2 B\r\n1 F 4\r\n3 D 2Output:Case 1:\r\n2\r\n3",
  "sample_output": "Not found",
  "link": "https://www.spoj.com/problems/BDOI16A",
  "scraped_at": "2025-08-17 00:33:15"
}