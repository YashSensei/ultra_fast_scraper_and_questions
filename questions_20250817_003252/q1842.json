{
  "problem_code": "problems",
  "title": "New bricks disorder",
  "tags": [],
  "text": "You have n bricks arranged in a line on the table. There is exactly one letter on each of them. Your task is to rearrange those bricks so that letters on them create some specified inscription. While rearranging you can only swap adjacent bricks with specified letters (you are given m pairs (a1, b1) .. (am, bm) and you are only allowed to swap bricks with ai on one of them and bi on the second, for some i = 1..m). You should check if it is possible to accomplish this - and if it is - calculate minimal needed number of swaps.InputThere is a single integer c on the first line of input. Then c test cases follow: each of them consists of two lines of small letters (a..z) with lengths not exceeding 100000 (descriptions of starting and ending configurations), one integer m in the next line and then m lines with two letters ai, bi in each of them.OutputFor each test case you should print -1 if it is not possible to rearrange bricks or the minimal number of swaps if it is possible (if so, output this value modulo 232).ExampleInput:\r\n4\r\nab\r\nba\r\n0\r\nabc\r\ncba\r\n3\r\nab\r\ncb\r\nca\r\ncabbbc\r\ncbabbc\r\n1\r\nab\r\nabba\r\nbaab\r\n1\r\nab\r\n\r\nOutput:\r\n-1\r\n3\r\n1\r\n2Warning: large Input/Output data, be careful with certain languages",
  "sample_input": "Input:\r\n4\r\nab\r\nba\r\n0\r\nabc\r\ncba\r\n3\r\nab\r\ncb\r\nca\r\ncabbbc\r\ncbabbc\r\n1\r\nab\r\nabba\r\nbaab\r\n1\r\nab\r\n\r\nOutput:\r\n-1\r\n3\r\n1\r\n2",
  "sample_output": "Not found",
  "link": "https://www.spoj.com/problems/BRICKS",
  "scraped_at": "2025-08-17 00:33:33"
}