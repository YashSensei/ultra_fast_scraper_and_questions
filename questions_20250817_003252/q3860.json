{
  "problem_code": "problems",
  "title": "2x2 Subgrid Sum Problem (generalized)",
  "tags": [],
  "text": "This problem is a higher constraints and generalized version ofKWACIK(Polish) andGRIDSUM2.You are given akxkgrid. You can place an integerm(a≤m≤b) in each cell.How many ways are there to place integers in the cells such that the sum of each 2x2 subgrid isn?Since the answer might be very large, output it modulo479001600(=12!).InputThe first line contains an integerT(1 ≤T≤ 104), the number of test cases.On each of the nextTlines, you are given four integersk,a,bandn.(2 ≤k≤ 5, 0 ≤a≤b≤ 5 * 108, 0 ≤n≤ 2 * 109)OutputFor each test case, output a single line containing the number of ways to place integers modulo479001600(=12!).ExampleInput:4\r\n2 1 2 4\r\n3 1 2 5\r\n4 1 3 6\r\n5 1 3 8Output:1\r\n8\r\n74\r\n1383ExplanationThere are 8 ways to place integers fork=3,a=1,b=2 andn=5.2 1 2 : 2 1 2 : 2 1 1 : 1 2 1 : 1 2 1 : 1 1 2 : 1 1 1 : 1 1 1\r\n1 1 1 : 1 1 1 : 1 1 2 : 1 1 1 : 1 1 1 : 2 1 1 : 2 1 2 : 1 2 1\r\n2 1 2 : 1 2 1 : 2 1 1 : 2 1 2 : 1 2 1 : 1 1 2 : 1 1 1 : 1 1 1Credit & Special thanksBartek- the original problem authorMitch Schwartz",
  "sample_input": "4\r\n2 1 2 4\r\n3 1 2 5\r\n4 1 3 6\r\n5 1 3 8",
  "sample_output": "1\r\n8\r\n74\r\n1383",
  "link": "https://www.spoj.com/problems/GRIDSUM3",
  "scraped_at": "2025-08-17 00:34:38"
}