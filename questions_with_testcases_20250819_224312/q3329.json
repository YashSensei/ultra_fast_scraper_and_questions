{
  "problem_code": "problems",
  "title": "Stabards",
  "tags": [],
  "text": "In a galaxy far far away, there exists a silicon based form of life, who call themselves stabards. Unlike humans, the stabards are multi-gendered. Therefore, when two stabards form a partnership (known as mating in earth parlance), one stabard would be the donor of genetic material and the other would be the combinator of the genetic material. Of course, the combinator had the tougher task, to combine the genetic material and create a new stabard.Early on, the wise stabards realized that due to the increased number of genders, every stabard was likely to waste his time trying to find a suitable partner. After that, due to the tremendous opportunity, every stabard would waste some more time trying to cheat on his partner by forming more partnerships (especially the donors since they had nothing much to do). Therefore, the wise ones made the following rules about partnerships:Each stabard can form at most two partnerships.In order to maintain a sense of balance, a stabard cannot play the same role (donor/combinator) in both partnerships.The partnerships shall be formed such that the total number of them is maximized.To ensure all rules are being followed, the wise ones send the stabard data every year to earth and wish to know the maximum number of partnerships that can be formed.InputFor each test case, two integers M (the number of stabard genders) and N (the total number of stabards) are given on the first line. M lines follow, each consisting of M characters. The j-th character on the i-th line denotes what would happen if a stabard of gender i formed a partnership with a stabard of gender j. It will be either'X' – such a partnership is forbidden.'D' – stabard of gender i would be the donor.'C' – stabard of gender i would be the combinator.After the M lines, N space separated integers are given on a single line. The i-th integer gives the gender of the i-th stabard.The end of the test cases is given by a line with M and N both being 0. This test case should not be processed. The total number of test cases will be ≤ 100.Constraints0 < M ≤ 1000 < N ≤ 100The gender data for stabards will be symmetric and consistent. (i.e. character i on line j will not conflict with character j on line i). Two stabards of the same gender can never partner each other. (The wise ones fear this will pollute the gene pool. Moreover, big fights would break out as who would be the donor.) The gender given for each stabard will be between 0 and M-1 inclusive.OutputFor each test case, a single integer giving the total number of partnerships. Each integer must be on its own line.ExampleInput:2 4\r\nXD\r\nCX\r\n0 0 1 1\r\n3 3\r\nXDC\r\nCXD\r\nDCX\r\n0 1 2\r\n0 0Output:2\r\n3",
  "sample_input": "Input:2 4\r\nXD\r\nCX\r\n0 0 1 1\r\n3 3\r\nXDC\r\nCXD\r\nDCX\r\n0 1 2\r\n0 0Output:2\r\n3",
  "sample_output": "Not found",
  "link": "https://www.spoj.com/problems/STABARDS",
  "scraped_at": "2025-08-17 00:34:25",
  "test_cases": [
    {
      "input": "2 4\r\nXD\r\nCX\r\n0 0 1 1\r\n3 3\r\nXDC\r\nCXD\r\nDCX\r\n0 1 2\r\n0 0",
      "expected_output": "2\r\n3",
      "type": "sample_1",
      "description": "Original sample 1 from problem statement"
    },
    {
      "input": "10 4\nydy\nt\n4 3 7 10\n8 2\nji\niozfho\nvljief\n2 6 1\n9 6",
      "expected_output": "To be computed",
      "type": "small_case_2",
      "description": "Generated small test case"
    },
    {
      "input": "4 7\nl\nbsvw\n8 10 6 8\n1 7\naxtnqm\nrc\nckhvh\n5 1 1\n1 4",
      "expected_output": "To be computed",
      "type": "small_case_3",
      "description": "Generated small test case"
    },
    {
      "input": "5 9\nod\ntug\n1 7 6 5\n9 10\nltj\najlrzn\nbmghpi\n1 9 2\n5 4",
      "expected_output": "To be computed",
      "type": "small_case_4",
      "description": "Generated small test case"
    },
    {
      "input": "31 49\nf\nlq\n7 11 80 32\n78 39\nauvax\nmfzs\ny\n22 48 18\n25 33",
      "expected_output": "To be computed",
      "type": "medium_case_5",
      "description": "Generated medium test case"
    },
    {
      "input": "68 99\nyulr\nbhpu\n34 27 2 28\n37 29\nvjyh\nllwsqv\npoxzjs\n35 53 25\n100 48",
      "expected_output": "To be computed",
      "type": "medium_case_6",
      "description": "Generated medium test case"
    },
    {
      "input": "46 60\nln\nkp\n77 66 61 43\n8 90\nopgc\ngfha\notxu\n100 45 56\n96 10",
      "expected_output": "To be computed",
      "type": "medium_case_7",
      "description": "Generated medium test case"
    },
    {
      "input": "72 38\nnr\nvq\n68 55 60 10\n5 40\nkxke\nftajtb\nvthjh\n11 100 65\n71 20",
      "expected_output": "To be computed",
      "type": "medium_case_8",
      "description": "Generated medium test case"
    },
    {
      "input": "33 81\nkxr\npg\n92 27 7 81\n19 5\nwq\nxw\nr\n46 61 37\n21 100",
      "expected_output": "To be computed",
      "type": "medium_case_9",
      "description": "Generated medium test case"
    },
    {
      "input": "24 28\nbkb\nvopx\n34 21 14 26\n17 9\nbiql\nrzcm\nfgcfj\n22 23 47\n43 47",
      "expected_output": "To be computed",
      "type": "large_case_10",
      "description": "Generated large test case"
    },
    {
      "input": "43 6\nnl\nzl\n33 7 34 19\n18 21\ng\nxyuspv\nhez\n31 36 40\n48 33",
      "expected_output": "To be computed",
      "type": "large_case_11",
      "description": "Generated large test case"
    },
    {
      "input": "24 7\nxmqj\nr\n33 15 7 33\n8 35\nktl\nathiz\nzs\n46 28 37\n37 10",
      "expected_output": "To be computed",
      "type": "large_case_12",
      "description": "Generated large test case"
    },
    {
      "input": "47 22\neo\nr\n37 29 25 37\n20 26\nije\nikbv\noatacl\n30 34 46\n42 50",
      "expected_output": "To be computed",
      "type": "large_case_13",
      "description": "Generated large test case"
    },
    {
      "input": "50 11\nxpte\nbhu\n20 42 25 22\n27 45\na\nudee\nzmlnjc\n48 15 25\n45 43",
      "expected_output": "To be computed",
      "type": "large_case_14",
      "description": "Generated large test case"
    },
    {
      "input": "8 25\nbsu\nmzkz\n27 39 33 8\n49 45\nnwdtm\novadpm\nefnh\n27 35 25\n45 48",
      "expected_output": "To be computed",
      "type": "large_case_15",
      "description": "Generated large test case"
    },
    {
      "input": "22 42\ndyuj\ngr\n24 25 48 8\n44 5\nuservx\nzhwkd\nkwgd\n31 17 21\n44 48",
      "expected_output": "To be computed",
      "type": "large_case_16",
      "description": "Generated large test case"
    },
    {
      "input": "100 100\na\nluol\n100 100 100 100\n100 100\nso\nsjj\npb\n100 100 100\n100 100",
      "expected_output": "To be computed",
      "type": "max_case_17",
      "description": "Generated max test case"
    },
    {
      "input": "100 100\nl\njjpi\n100 100 100 100\n100 100\nac\njr\nkjiphw\n100 100 100\n100 100",
      "expected_output": "To be computed",
      "type": "max_case_18",
      "description": "Generated max test case"
    },
    {
      "input": "1 100\ni\nyh\n1 1 100 99\n100 100\ntp\nxmi\nd\n100 100 2\n99 100",
      "expected_output": "To be computed",
      "type": "edge_case_19",
      "description": "Generated edge test case"
    },
    {
      "input": "100 99\nn\ne\n2 2 2 99\n1 100\ne\nf\nolq\n99 100 100\n1 1",
      "expected_output": "To be computed",
      "type": "edge_case_20",
      "description": "Generated edge test case"
    }
  ],
  "test_cases_generated_at": "2025-08-19 22:43:23",
  "total_test_cases": 20
}