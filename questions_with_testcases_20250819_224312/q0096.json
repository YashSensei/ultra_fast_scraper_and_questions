{
  "problem_code": "problems",
  "title": "Maze",
  "tags": [],
  "text": "The King of Byteland likes Greek mythology very much. The most impressive myth for him is the one about Minotaur.\r\nA creature which was imprisoned in a maze-like construction. Now The King wants to have similar maze.\r\nHe ordered to his architect to build such construction.The architect decided that maze will have rectangular form. Its floor will be made from large square plates.\r\nAlso there will be many walls, each of which will separate two common floor plates. From the bird's eye whole construction\r\nwill look like a grid with some cells separated by walls. The maze should be very tricky, that's why he calls the maze correct\r\nif and only if for every two plates there is exactly one path between them. Here path is a sequence of moves between plates that\r\nshare a common side and are not separated by wall. Each plate can only appear once in a path.Sooner or later, the architect started his work. After a couple of months he created a rectangular area with H rows\r\nand W columns. Also he has built K walls. Sounds perfect but he was seized with a lingering doubt about correctness of\r\nhis maze.That's why he asks you to help him. He wants to know how many different correct mazes can be built based on his\r\ncurrent maze i.e. you can only add new walls but not to break any of the old ones.For example (see figure 1.) the maze size is 2x2 and there are no walls. All four ways to complete this maze are shown on the\r\nright of the figure (new walls are dashed).Figure 2. illustrates maze of size 3x3 with 3 walls. There are exactly 4 ways to complete it.Figure 3. shows the maze that cannot be completed, because there is no path from lower right plate to upper left one.InputThe first line contains two integer numbers W and H\r\n(1 ≤ W, H ≤ 5). Second line contains one integer number K (K ≥ 0). Next K lines\r\ncontain description of walls. Each wall is determined by two plates it separates. \r\nThus, each line contains four integer numbers: R_1, C_1, R_2 and C_2, here\r\nR_1 and C_1 - row and column coordinates of the first plate. Similar,\r\nR_2 и C_2 - are coordinates of the second plate (1 ≤ R_1, R_2 ≤ H, 1 ≤ C_1, C_2 ≤ W). \r\nRows are numbered from up to bottom, colums - left to right started from 1.\r\nIt is guaranteed that all walls are correct and there are no duplicates.\r\nWalls that form perimeter of the maze will not be specified.OutputOutput the number of different correct mazes that can be built based on the given one.\r\nThere should be no leading zeroes.ExampleInput:2 2\r\n0Output:4Input:3 3\r\n3\r\n3 1 3 2\r\n2 2 2 3\r\n2 3 3 3Output:4Input:3 3\r\n5\r\n3 1 3 2\r\n2 2 2 3\r\n2 3 3 3\r\n2 2 2 1\r\n1 2 2 2Output:0",
  "sample_input": "Input:2 2\r\n0Output:4Input:3 3\r\n3\r\n3 1 3 2\r\n2 2 2 3\r\n2 3 3 3Output:4Input:3 3\r\n5\r\n3 1 3 2\r\n2 2 2 3\r\n2 3 3 3\r\n2 2 2 1\r\n1 2 2 2Output:0",
  "sample_output": "Not found",
  "link": "https://www.spoj.com/problems/KPMAZE",
  "scraped_at": "2025-08-17 00:33:16",
  "test_cases": [
    {
      "input": "2 2\r\n0",
      "expected_output": "4Input:3 3\r\n3\r\n3 1 3 2\r\n2 2 2 3\r\n2 3 3 3",
      "type": "sample_1",
      "description": "Original sample 1 from problem statement"
    },
    {
      "input": "10 6\n2",
      "expected_output": "To be computed",
      "type": "small_case_2",
      "description": "Generated small test case"
    },
    {
      "input": "4 1\n8",
      "expected_output": "To be computed",
      "type": "small_case_3",
      "description": "Generated small test case"
    },
    {
      "input": "2 4\n4",
      "expected_output": "To be computed",
      "type": "small_case_4",
      "description": "Generated small test case"
    },
    {
      "input": "29 76\n43",
      "expected_output": "To be computed",
      "type": "medium_case_5",
      "description": "Generated medium test case"
    },
    {
      "input": "70 13\n30",
      "expected_output": "To be computed",
      "type": "medium_case_6",
      "description": "Generated medium test case"
    },
    {
      "input": "74 89\n92",
      "expected_output": "To be computed",
      "type": "medium_case_7",
      "description": "Generated medium test case"
    },
    {
      "input": "63 34\n39",
      "expected_output": "To be computed",
      "type": "medium_case_8",
      "description": "Generated medium test case"
    },
    {
      "input": "60 33\n71",
      "expected_output": "To be computed",
      "type": "medium_case_9",
      "description": "Generated medium test case"
    },
    {
      "input": "212 232\n164",
      "expected_output": "To be computed",
      "type": "large_case_10",
      "description": "Generated large test case"
    },
    {
      "input": "232 143\n455",
      "expected_output": "To be computed",
      "type": "large_case_11",
      "description": "Generated large test case"
    },
    {
      "input": "97 300\n320",
      "expected_output": "To be computed",
      "type": "large_case_12",
      "description": "Generated large test case"
    },
    {
      "input": "263 100\n412",
      "expected_output": "To be computed",
      "type": "large_case_13",
      "description": "Generated large test case"
    },
    {
      "input": "83 425\n74",
      "expected_output": "To be computed",
      "type": "large_case_14",
      "description": "Generated large test case"
    },
    {
      "input": "394 93\n112",
      "expected_output": "To be computed",
      "type": "large_case_15",
      "description": "Generated large test case"
    },
    {
      "input": "115 155\n375",
      "expected_output": "To be computed",
      "type": "large_case_16",
      "description": "Generated large test case"
    },
    {
      "input": "1000 1000\n1000",
      "expected_output": "To be computed",
      "type": "max_case_17",
      "description": "Generated max test case"
    },
    {
      "input": "1000 1000\n1000",
      "expected_output": "To be computed",
      "type": "max_case_18",
      "description": "Generated max test case"
    },
    {
      "input": "1 1000\n1000",
      "expected_output": "To be computed",
      "type": "edge_case_19",
      "description": "Generated edge test case"
    },
    {
      "input": "1 2\n1000",
      "expected_output": "To be computed",
      "type": "edge_case_20",
      "description": "Generated edge test case"
    }
  ],
  "test_cases_generated_at": "2025-08-19 22:43:12",
  "total_test_cases": 20
}