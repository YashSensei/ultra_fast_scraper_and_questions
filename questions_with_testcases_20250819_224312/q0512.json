{
  "problem_code": "problems",
  "title": "Matrica",
  "tags": [],
  "text": "A matrix is a rectangular table of letters. A square matrix is a matrix with an equal number of rows and columns. A square matrix M is called symmetric if its letters are symmetric with respect to the main diagonal (Mi,j= Mj,ifor all pairs of i and j).For example, the following two matrices are symmetric:AAB          AAA\r\nACC          ABA\r\nBCC          AAAHowever, the following two are not:ABCD          AAB\r\nABCD          ACA\r\nABCD          DAA\r\nABCDGiven a collection of available letters, you are to output a subset of columns in the lexicographically smallest symmetric matrix which can be composed using all the letters. If no such matrix exists, output \"IMPOSSIBLE\".To determine if matrix A is lexicographically smaller than matrix B, consider their elements in row-major order (as if you concatenated all rows to form a long string). If the first element in which the matrices differ is smaller in A, then A is lexicographically smaller than B.InputThe first line of input contains two integers N (1 ≤ N ≤ 30000) and K (1 ≤ K ≤ 26). N is the dimension of the matrix, while K is the number of distinct letters that will appear.Each of the following K lines contains an uppercase letter and a positive integer, separated by a space.The integer denotes how many corresponding letters are to be used. For example, if a line says \"A 3\", then the letter A must appear three times in the output matrix.The total number of letters will be exactly N2. No letter will appear more than once in the input.The next line contains an integer P (1 ≤ P ≤ 50), the number of columns that must be output.The last line contains P integers, the indices of columns that must be output. The indices will be between 1 and N inclusive, given in increasing order and without duplicates.OutputIf it is possible to compose a symmetric matrix from the given collection of letters, output the required columns on N lines, each containing P character, without spaces. Otherwise, output \"IMPOSSIBLE\" (quotes for clarity).ExampleInput:3 3\r\nA 3\r\nB 2\r\nC 4\r\n3\r\n1 2 3Output:AAB\r\nACC\r\nBCCInput:4 5\r\nE 4\r\nA 3\r\nB 3\r\nC 3\r\nD 3\r\n2\r\n2 4Output:AC\r\nBE\r\nDE\r\nEDInput:4 6\r\nF 1\r\nE 3\r\nA 3\r\nB 3\r\nC 3\r\nD 3\r\n4\r\n1 2 3 4Output:IMPOSSIBLEWarning: large input/output data.Note: The test data for this problem consist of the official test cases from the contest, as well some cases of my own.",
  "sample_input": "AAB          AAA\r\nACC          ABA\r\nBCC          AAA",
  "sample_output": "ABCD          AAB\r\nABCD          ACA\r\nABCD          DAA\r\nABCD",
  "link": "https://www.spoj.com/problems/MATRICA",
  "scraped_at": "2025-08-17 00:33:04",
  "test_cases": [
    {
      "input": "AAB          AAA\r\nACC          ABA\r\nBCC          AAA",
      "expected_output": "ABCD          AAB\r\nABCD          ACA\r\nABCD          DAA\r\nABCD",
      "type": "sample_1",
      "description": "Original sample 1 from problem statement"
    },
    {
      "input": "uln gabez\na ua\njb t",
      "expected_output": "To be computed",
      "type": "small_case_2",
      "description": "Generated small test case"
    },
    {
      "input": "qsnze clpna\nsof kak\nyn za",
      "expected_output": "To be computed",
      "type": "small_case_3",
      "description": "Generated small test case"
    },
    {
      "input": "pvm cbc\nbwf m\nvsf urlwp",
      "expected_output": "To be computed",
      "type": "small_case_4",
      "description": "Generated small test case"
    },
    {
      "input": "uky h\nh i\nbknf vrr",
      "expected_output": "To be computed",
      "type": "medium_case_5",
      "description": "Generated medium test case"
    },
    {
      "input": "kdx ux\nw fsye\nlo xw",
      "expected_output": "To be computed",
      "type": "medium_case_6",
      "description": "Generated medium test case"
    },
    {
      "input": "nfku p\nx lwxw\nahghu a",
      "expected_output": "To be computed",
      "type": "medium_case_7",
      "description": "Generated medium test case"
    },
    {
      "input": "szcwd papbh\nlhri o\nm p",
      "expected_output": "To be computed",
      "type": "medium_case_8",
      "description": "Generated medium test case"
    },
    {
      "input": "cjmcu a\nbjfz dcdao\nhs c",
      "expected_output": "To be computed",
      "type": "medium_case_9",
      "description": "Generated medium test case"
    },
    {
      "input": "vsus clgjp\nja oro\nag v",
      "expected_output": "To be computed",
      "type": "large_case_10",
      "description": "Generated large test case"
    },
    {
      "input": "s mzs\ni hj\nrsx pzi",
      "expected_output": "To be computed",
      "type": "large_case_11",
      "description": "Generated large test case"
    },
    {
      "input": "x ddma\nw fav\ncizi f",
      "expected_output": "To be computed",
      "type": "large_case_12",
      "description": "Generated large test case"
    },
    {
      "input": "edpv xxz\nohc zaao\nenxep qkmmu",
      "expected_output": "To be computed",
      "type": "large_case_13",
      "description": "Generated large test case"
    },
    {
      "input": "ubwip wdppu\nhnjvq si\nc muxfa",
      "expected_output": "To be computed",
      "type": "large_case_14",
      "description": "Generated large test case"
    },
    {
      "input": "rqw gosi\nicews puc\nim ya",
      "expected_output": "To be computed",
      "type": "large_case_15",
      "description": "Generated large test case"
    },
    {
      "input": "qzkbb viic\nokce uf\nf uz",
      "expected_output": "To be computed",
      "type": "large_case_16",
      "description": "Generated large test case"
    },
    {
      "input": "kvf stod\nn aazer\naksrm yl",
      "expected_output": "To be computed",
      "type": "max_case_17",
      "description": "Generated max test case"
    },
    {
      "input": "inna dbmr\nfuc zsi\no eazjb",
      "expected_output": "To be computed",
      "type": "max_case_18",
      "description": "Generated max test case"
    },
    {
      "input": "qzv tqpg\npngjt vr\nje vrug",
      "expected_output": "To be computed",
      "type": "edge_case_19",
      "description": "Generated edge test case"
    },
    {
      "input": "iu saby\nmbgc yrhkj\nmh v",
      "expected_output": "To be computed",
      "type": "edge_case_20",
      "description": "Generated edge test case"
    }
  ],
  "test_cases_generated_at": "2025-08-19 22:43:14",
  "total_test_cases": 20
}