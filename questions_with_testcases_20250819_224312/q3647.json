{
  "problem_code": "problems",
  "title": "Queen and Stable Relationships",
  "tags": [],
  "text": "Swayamvara, in ancient India, was a practice of choosing a husband, from a list of suitors by a girl of marriageable age.It is the Swayamvara of gossip queen of IIIT, Akshata. Now, Akshata is always interested in knowing the stability of the relationships among various students of IIIT. Nowadays she is very busy in her Swayamvara’s preparation and is not able to update herself about the latest gossips. As you know she is the gossip queen. She would love if someone could do her a favor and collect answers of her questions about relationships in IIIT. It might increase the collector’s chance of getting selected for marriage.Before starting preparations for the Swayamvara, Akshata used to maintain notes about the relationships in IIIT and knew all about them. So she thought she can help you by providing the notes.There are various ways in which two people can be acquaintances:IfAandBare in a relationship, thenAandBare acquaintances of each other.IfAandBare acquaintances of each other andBandCare acquaintances of each other, thenAandCare also acquaintances of each other.In Akshata's notes, a relationship betweenperson1andperson2is represented as \"person1 person2\". The Queen's questions are also special.There are two types of questions:First type of query is whether two people, sayAandB, still remain each others’ acquaintances even if two people, sayCandD, break-up and end their relationship.Second type of query is whether two people, sayAandB, still remain acquaintances even if a person, sayC, leaves the college (It’s obvious that before leaving college,Cends all his/her relationships).InputFirst line of the input contains two integers,NandMwhereNrepresents the number of people in IIIT andMrepresents the number of relationships in Akshata’s notes.The nextMlines contain2strings each, containing the names of2people who are in a relationship.Next line contains a single integerQ, which represents the number of questions asked by the Queen. Each of the nextQlines represents a query. For every query first integer represents the query type.If the query type is1then it is followed by four strings in the same line, representingA B C and D. you have to output \"STABLE\" ifA and Bremain acquaintances of each other even ifC and Dbreak up and \"NOT STABLE\" otherwise.If the query type is2then it is followed by three strings in the same line, representingA B and C. You have to output \"STABLE\" ifA and Bremain acquaintances even ifCleaves college otherwise output \"NOT STABLE\". (All quotes for clarity)OutputFor every query output \"STABLE\" or \"NOT STABLE\" without quotes.Constraints1 ≤ N ≤ 100001 ≤ M ≤ 500001 ≤ Q ≤ 10000Size of all strings will be less than 50 characters.ExampleInput 1:3 2\r\nPerson1 Person2\r\nPerson1 Person3\r\n2\r\n2 Person2 Person3 Person1\r\n1 Person1 Person2 Person1 Person3Output 1:NOT STABLE\r\nSTABLEExplanation of Example 1Person1 is in a relationship with Person2 and Person1 is also in a relation with Person3. So Person3 and Person2 are acquaintances.First Query:Person2 and Person3 are acquaintances of each other only because of Person1, if Person1 leaves the college, then Person2 and Person3 are no longer acquaintances of each other.Second Query:Person1 will remain being acquaintance of Person2 even if Person1 breaks-up with Person3.Input 2:17 18\r\nPerson1 Person2\r\nPerson1 Person4\r\nPerson2 Person4\r\nPerson4 Person6\r\nPerson2 Person6\r\nPerson2 Person3\r\nPerson3 Person5\r\nPerson1 Person7\r\nPerson7 Person8\r\nPerson7 Person9\r\nPerson7 Person10\r\nPerson9 Person12\r\nPerson8 Person12\r\nPerson8 Person11\r\nPerson12 Person13\r\nPerson14 Person15\r\nPerson15 Person16\r\nPerson16 Person17\r\n8\r\n2 Person1 Person14 Person7\r\n2 Person1 Person2 Person2\r\n1 Person1 Person14 Person2 Person4\r\n1 Person5 Person13 Person1 Person2\r\n1 Person6 Person2 Person1 Person4\r\n1 Person13 Person6 Person7 Person8\r\n2 Person13 Person6 Person7\r\n2 Person13 Person6 Person8\r\n2 Person13 Person8 Person7Output 2:NOT STABLE\r\nNOT STABLE\r\nNOT STABLE\r\nSTABLE\r\nSTABLE\r\nSTABLE\r\nNOT STABLE\r\nSTABLEProblem Setter: Mayank Natani",
  "sample_input": "Input 1:3 2\r\nPerson1 Person2\r\nPerson1 Person3\r\n2\r\n2 Person2 Person3 Person1\r\n1 Person1 Person2 Person1 Person3Output 1:NOT STABLE\r\nSTABLE",
  "sample_output": "Input 2:17 18\r\nPerson1 Person2\r\nPerson1 Person4\r\nPerson2 Person4\r\nPerson4 Person6\r\nPerson2 Person6\r\nPerson2 Person3\r\nPerson3 Person5\r\nPerson1 Person7\r\nPerson7 Person8\r\nPerson7 Person9\r\nPerson7 Person10\r\nPerson9 Person12\r\nPerson8 Person12\r\nPerson8 Person11\r\nPerson12 Person13\r\nPerson14 Person15\r\nPerson15 Person16\r\nPerson16 Person17\r\n8\r\n2 Person1 Person14 Person7\r\n2 Person1 Person2 Person2\r\n1 Person1 Person14 Person2 Person4\r\n1 Person5 Person13 Person1 Person2\r\n1 Person6 Person2 Person1 Person4\r\n1 Person13 Person6 Person7 Person8\r\n2 Person13 Person6 Person7\r\n2 Person13 Person6 Person8\r\n2 Person13 Person8 Person7Output 2:NOT STABLE\r\nNOT STABLE\r\nNOT STABLE\r\nSTABLE\r\nSTABLE\r\nSTABLE\r\nNOT STABLE\r\nSTABLE",
  "link": "https://www.spoj.com/problems/QSTABLE",
  "scraped_at": "2025-08-17 00:34:27",
  "test_cases": [
    {
      "input": "Input 1:3 2\r\nPerson1 Person2\r\nPerson1 Person3\r\n2\r\n2 Person2 Person3 Person1\r\n1 Person1 Person2 Person1 Person3Output 1:NOT STABLE\r\nSTABLE",
      "expected_output": "Input 2:17 18\r\nPerson1 Person2\r\nPerson1 Person4\r\nPerson2 Person4\r\nPerson4 Person6\r\nPerson2 Person6\r\nPerson2 Person3\r\nPerson3 Person5\r\nPerson1 Person7\r\nPerson7 Person8\r\nPerson7 Person9\r\nPerson7 Person10\r\nPerson9 Person12\r\nPerson8 Person12\r\nPerson8 Person11\r\nPerson12 Person13\r\nPerson14 Person15\r\nPerson15 Person16\r\nPerson16 Person17\r\n8\r\n2 Person1 Person14 Person7\r\n2 Person1 Person2 Person2\r\n1 Person1 Person14 Person2 Person4\r\n1 Person5 Person13 Person1 Person2\r\n1 Person6 Person2 Person1 Person4\r\n1 Person13 Person6 Person7 Person8\r\n2 Person13 Person6 Person7\r\n2 Person13 Person6 Person8\r\n2 Person13 Person8 Person7Output 2:NOT STABLE\r\nNOT STABLE\r\nNOT STABLE\r\nSTABLE\r\nSTABLE\r\nSTABLE\r\nNOT STABLE\r\nSTABLE",
      "type": "sample_1",
      "description": "Original sample 1 from problem statement"
    },
    {
      "input": "1 7 6\nli qylr 2\n8 10\nfzmr q\n7 7\ne b\n1\n2 9 6 7\n2 ypvroag lmfomcg eamfd\n8 5 7 9 4 2\n1 refrk xxvvjcp wigh oktzibvbyc uembe bv\nlqubmyozbn",
      "expected_output": "To be computed",
      "type": "small_case_2",
      "description": "Generated small test case"
    },
    {
      "input": "1 5 8\nljz yroq 7\n5 3\nci tckruj\n2 3\ngbft jfdv\n5\n3 10 1 3\n3 afcni rdydgsc nb\n6 4 4 2 3 7\n8 p wugsokv w rcscgxpyjuri kufcf gp\nhfgwo",
      "expected_output": "To be computed",
      "type": "small_case_3",
      "description": "Generated small test case"
    },
    {
      "input": "7 3 6\nkym eevg 8\n10 2\nxp jduex\n7 10\nvhbjugd illin\n5\n7 9 3 7\n7 wbfxbl mhns e\n6 5 2 10 5 10\n8 y yfmjkn sgytb wfh o knjltd\ny",
      "expected_output": "To be computed",
      "type": "small_case_4",
      "description": "Generated small test case"
    },
    {
      "input": "77 74 51\nnq viujy 3\n77 40\nkb b\n77 30\nmtrn swe\n97\n45 56 53 63\n52 x dkxuio m\n26 4 8 4 50 71\n100 s uttv pw cxh b vhm\nqlnlch",
      "expected_output": "To be computed",
      "type": "medium_case_5",
      "description": "Generated medium test case"
    },
    {
      "input": "47 72 75\nfztx l 57\n38 39\ngfv ddhzds\n86 76\nkarg qkp\n28\n7 28 5 98\n79 krimis lxt jo\n15 57 28 57 86 15\n54 aei b s pyuxrnm uus lhe\nlqwpxtlvr",
      "expected_output": "To be computed",
      "type": "medium_case_6",
      "description": "Generated medium test case"
    },
    {
      "input": "37 43 75\nudfds yuqh 79\n52 23\nafpgaf mkphe\n33 42\numepf ndow\n74\n43 64 80 61\n22 qdi uyf mlzwwg\n51 75 31 80 75 57\n84 giyttdk g yefcl f yeau ymx\npnpbikhfts",
      "expected_output": "To be computed",
      "type": "medium_case_7",
      "description": "Generated medium test case"
    },
    {
      "input": "24 18 85\nx nfo 69\n62 80\ngnh wo\n43 50\nze cginyj\n61\n96 42 62 87\n93 ounb argvcow fiavtyn\n53 50 52 51 42 76\n41 trasp lwsznyn esyabh jghwelqy extrd gfqln\ntnjkttf",
      "expected_output": "To be computed",
      "type": "medium_case_8",
      "description": "Generated medium test case"
    },
    {
      "input": "11 27 43\ntmu n 80\n21 3\nvfdmoo otzcf\n65 47\nqok ohy\n21\n91 54 1 82\n97 rz rmlig gotgbif\n46 2 1 30 59 9\n39 izvbcuh gbzinwv jbf uhyewby wpog o\nzyzs",
      "expected_output": "To be computed",
      "type": "medium_case_9",
      "description": "Generated medium test case"
    },
    {
      "input": "17898 43954 41169\nx xc 44237\n39362 25978\nd zrxe\n5293 12933\npoac nbvzqe\n22360\n29984 28332 42805 26053\n8425 wci sqbalsm gasea\n26015 22247 34646 30985 16373 46363\n25271 z oxrnr hxrjk qqeqrr w hbt\ntl",
      "expected_output": "To be computed",
      "type": "large_case_10",
      "description": "Generated large test case"
    },
    {
      "input": "24184 43406 13145\novdz j 15140\n45287 7832\nysvppb dc\n28042 11646\niqlpjq dueo\n23806\n15257 12145 38239 24190\n28023 zchni u k\n17444 31896 13320 45794 14897 27349\n34216 vkctun v ckkoom xwjimgp hrb muas\ntidvaerk",
      "expected_output": "To be computed",
      "type": "large_case_11",
      "description": "Generated large test case"
    },
    {
      "input": "12264 40582 22028\nutz skv 45327\n35542 21447\nteskvc nnlpi\n41086 49237\nsv gcfhb\n49012\n35666 37718 43625 20318\n7353 mfh wgvus uaticpt\n30554 22502 27793 41197 27637 30259\n22365 zus ds gzljxp ahgvwvqixwlvb es ue\nun",
      "expected_output": "To be computed",
      "type": "large_case_12",
      "description": "Generated large test case"
    },
    {
      "input": "28678 45224 40905\ngk bdiv 9622\n38557 16525\ncbmcsh vrxzrz\n22296 31532\nhimz puqmnkq\n41923\n6396 41214 37889 38496\n44213 rscuiml kpp aj\n43528 28258 21213 33298 20896 49670\n23271 kpfurs aequua mvmcsvj nwl fyxq zo\ncgkxgxwvjs",
      "expected_output": "To be computed",
      "type": "large_case_13",
      "description": "Generated large test case"
    },
    {
      "input": "7885 16850 15330\nadgv ybwh 32874\n19407 40654\nrztchd osouoq\n9752 36685\ne ttehhac\n11931\n28185 38539 33840 16413\n8070 tib k iytfw\n20246 6048 20132 33081 38773 18844\n49225 sjz rwvefb nnqe nphqtjpsihbt fe wezwiw\nzjrxh",
      "expected_output": "To be computed",
      "type": "large_case_14",
      "description": "Generated large test case"
    },
    {
      "input": "15591 46426 48646\nsjz sfzlp 44939\n24975 17149\nxmioc ax\n6550 18393\nwndq as\n13421\n8938 33239 21365 18856\n48934 rnyqylx hy nyn\n8711 25099 45823 14918 6717 24746\n10021 viwkl h noqk rjxwgpsqilra mo ipcdu\nhiu",
      "expected_output": "To be computed",
      "type": "large_case_15",
      "description": "Generated large test case"
    },
    {
      "input": "39161 19499 13309\nl e 6018\n22780 31215\nijwysni nxgpm\n10831 24358\nejubgq ig\n33219\n18169 19098 30240 9881\n36305 ihibc edkdov jchzj\n24503 18881 9152 42529 35380 45836\n11381 nyie sl b rxwnwprufr xhuvz qqqsm\ncgwwcylbkuy",
      "expected_output": "To be computed",
      "type": "large_case_16",
      "description": "Generated large test case"
    },
    {
      "input": "100001 100001 100001\nf tyz 100001\n100001 100001\nzlli h\n100001 100001\nxo hppdnb\n100001\n100001 100001 100001 100001\n100001 gfkqwiw obagi fn\n100001 100001 100001 100001 100001 100001\n100001 f enefoz ddtvxr mmmjbrqra yw lphhx\nd",
      "expected_output": "To be computed",
      "type": "max_case_17",
      "description": "Generated max test case"
    },
    {
      "input": "100001 100001 100001\nzez p 100001\n100001 100001\naa awqyc\n100001 100001\nolz vfyhe\n100001\n100001 100001 100001 100001\n100001 djmpys fooseli r\n100001 100001 100001 100001 100001 100001\n100001 g rtknze bxzup xgngdcctncqas za y\nakklmpdr",
      "expected_output": "To be computed",
      "type": "max_case_18",
      "description": "Generated max test case"
    },
    {
      "input": "2 100000 1\nbdio jacfi 100000\n1 100000\na vnty\n100000 2\noayf mlrxvoh\n100001\n1 2 100000 100001\n2 xub schwazu yklphw\n2 2 1 2 100000 100001\n1 dobsff m if ttardxcacln lcc pvuo\nfhuesi",
      "expected_output": "To be computed",
      "type": "edge_case_19",
      "description": "Generated edge test case"
    },
    {
      "input": "2 100001 100000\nspqw kbi 100001\n100000 100000\nfxbo clvii\n100001 1\ngun k\n100000\n100000 100001 100001 100001\n2 tdnhnqa jmvlyoh pawximu\n1 100000 2 2 100001 1\n2 gmvjt qr o ma kvydp ifb\ny",
      "expected_output": "To be computed",
      "type": "edge_case_20",
      "description": "Generated edge test case"
    }
  ],
  "test_cases_generated_at": "2025-08-19 22:43:24",
  "total_test_cases": 20
}